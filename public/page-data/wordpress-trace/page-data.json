{"componentChunkName":"component---src-templates-post-js","path":"/wordpress-trace/","result":{"data":{"wordpressPost":{"id":"1a78f03c-3f71-5909-a21f-eeaa70be2282","title":"本番のWordPress環境を自分のローカル環境にトレース（再現）する時の手順","slug":"wordpress-trace","content":"<p>サイト全体をカスタマイズするときなど、お客様のWordPressサイトを丸ごとローカルに再現するといったことをやっています。</p>\n<p>軽微なものなら本番環境をチョコチョコって直せばいいですが、全体的に構成変えるとかってなると、本番を直接イジるわけにもいきませんよね・・。</p>\n<ul>\n<li>WordPress管理画面へのログイン情報（ログインURL、ユーザー名、パスワード）</li>\n<li>サーバーへ接続するためのFTP情報（ホスト名、ユーザー名、パスワード）</li>\n</ul>\n<p>を教えてもらえれば、数分でローカルに同じ環境を作ることができます。</p>\n<p>そんな、本番のWordPress環境を自分のローカル環境にトレースする時の手順についてまとめました。<br />\n（バックアップを復元するときなども同じような考え方です）</p>\n<p>今回は例として、わたしのサイト（<a href=\"https://haniwaman.com/\">HPCode</a>）を再現してみます。</p>\n<p><span class=\"font-l\"><strong class=\"marker\">WordPress管理画面を触るときはお客様の環境と間違えないように注意してくださいね！</strong></span></p>\n<p>各種ツールを持っていることを前提で進めていきますので、持ってない方は都度入れてください。。（すみません）</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">開発環境に移せると色々と試せて気が楽になります</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#Local_by_Flywheel_WordPress\"><span class=\"toc_number toc_depth_1\">1</span> Local by Flywheel で専用のWordPress環境を用意</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">1.1</span> ローカル環境の初期設定</a></li></ul></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> 本番のテーマをダウンロード</a><ul><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_2\">2.1</span> テーマ変更</a></li></ul></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_1\">3</span> 本番の記事をエクスポート</a></li><li><a href=\"#i-5\"><span class=\"toc_number toc_depth_1\">4</span> ローカル環境に記事をインポート</a></li><li><a href=\"#i-6\"><span class=\"toc_number toc_depth_1\">5</span> 必要なプラグインのインストールと設定</a></li><li><a href=\"#i-7\"><span class=\"toc_number toc_depth_1\">6</span> 設定</a><ul><li><a href=\"#i-8\"><span class=\"toc_number toc_depth_2\">6.1</span> 表示設定</a></li><li><a href=\"#i-9\"><span class=\"toc_number toc_depth_2\">6.2</span> パーマリンク設定</a></li></ul></li><li><a href=\"#i-10\"><span class=\"toc_number toc_depth_1\">7</span> ウィジェットやメニュー</a></li><li><a href=\"#i-11\"><span class=\"toc_number toc_depth_1\">8</span> おわり</a></li></ul></div>\n<h2><span id=\"Local_by_Flywheel_WordPress\">Local by Flywheel で専用のWordPress環境を用意</span></h2>\n<p>Local by FlywheelはローカルにWordPress環境を1分で作ることができる神ツールです。WordPressの仕事してる人は確実に入れておきましょう。</p>\n<p>導入手順は以下にまとめています。<br />\n→ <a href=\"https://haniwaman.com/local-by-flywheel/\">たった1分でWordPress開発環境が作れる！「Local by Flywheel」がノンプログラマーに超絶おすすめ</a></p>\n<p>左下の「プラス」ボタンからサイトを追加しましょう。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace-700x467.png\" alt=\"\" width=\"700\" height=\"467\" class=\"alignnone size-medium wp-image-6066\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace-700x467.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace-768x512.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace.png 1200w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>サイト名を入力。分かりやすいように、ドメイン名とかお客様の名前（ローマ字）で作るといいと思います。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace2-700x467.png\" alt=\"\" width=\"700\" height=\"467\" class=\"alignnone size-medium wp-image-6067\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace2-700x467.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace2-768x512.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace2.png 1200w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>「Custom」から本番の環境に応じて設定しておくと無難です。デザインだけの場合は割と適当でも大丈夫だと思います。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace3-700x467.png\" alt=\"\" width=\"700\" height=\"467\" class=\"alignnone size-medium wp-image-6068\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace3-700x467.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace3-768x512.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace3.png 1200w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>「Add Site」からサイトを追加します！<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace4-700x467.png\" alt=\"\" width=\"700\" height=\"467\" class=\"alignnone size-medium wp-image-6069\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace4-700x467.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace4-768x512.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace4.png 1200w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h3><span id=\"i\">ローカル環境の初期設定</span></h3>\n<p>作成したら、「とりあえず」で日本語化しておきます。</p>\n<p>Settinngs → General から以下のように変更して保存しましょう。</p>\n<ul>\n<li>言語を「日本語」</li>\n<li>タイムゾーンを「東京」</li>\n</ul>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace5-700x313.png\" alt=\"\" width=\"700\" height=\"313\" class=\"alignnone size-medium wp-image-6070\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace5-700x313.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace5-768x343.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace5.png 878w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h2><span id=\"i-2\">本番のテーマをダウンロード</span></h2>\n<p>クライアント対応の本番環境の場合は、お客様からサーバーへ接続するための<strong class=\"marker\">FTP情報（ホスト名、ユーザー名、パスワード）</strong>を教えてもらってください。</p>\n<p><span class=\"folder\">/wp-content/themes</span>の中から使っているテーマを一式をダウンロードします。<br />\n※ 全部ダンロードする必要はありません。使っているやつだけで大丈夫です。</p>\n<p>ダウンロード先は、先程作成したLocal by Flywheelのテーマの場所です。<br />\nわたしの環境で言うと、以下の場所になります。「Local Sites」のフォルダまで辿り着ければあとはなんとかなるはずです。<br />\nC:/Users/[windowsのユーザー名]/Local Sites/hpcode/app/public/wp-content/themes</p>\n<p>HPCodeの場合は、「haniwaman」という自作したテーマです。これを、ローカルのテーマフォルダにダウンロードしてあげます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace6-700x222.png\" alt=\"\" width=\"700\" height=\"222\" class=\"alignnone size-medium wp-image-6071\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace6-700x222.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace6.png 756w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>ちなみに使っているFTPソフトはFileZillaです。</p>\n<h3><span id=\"i-3\">テーマ変更</span></h3>\n<p>テーマをダウンロードできたら、ローカルのテーマを、そのダウンロードしたテーマに変更します。</p>\n<p>これはいつもやっている手順ですね。管理画面から外観 → テーマ で選んで有効化するだけです。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace7-700x486.png\" alt=\"\" width=\"700\" height=\"486\" class=\"alignnone size-medium wp-image-6074\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace7-700x486.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace7-768x533.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace7-1200x833.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace7.png 1217w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h2><span id=\"i-4\">本番の記事をエクスポート</span></h2>\n<p>お客様のWordPress管理画面から記事をエクスポートします。</p>\n<p>ツール → エクスポート から<strong class=\"marker\">必要なもの</strong>をエクスポートしていきましょう。</p>\n<p>個人的に必須なのは、「投稿」と「固定」。「メディア」と「カスタム投稿タイプで作られた記事」は必要に応じてエクスポートしています。</p>\n<p>こんな感じで末尾に分かりやすく名前をつけておくとインポートの時に楽になります。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace9.png\" alt=\"\" width=\"261\" height=\"131\" class=\"alignnone size-full wp-image-6075\" /></p>\n<h2><span id=\"i-5\">ローカル環境に記事をインポート</span></h2>\n<p>お客様からエクスポートした記事をローカル環境に入れていきます。</p>\n<p>ツール → インポート → WordPress「今すぐインストール」<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace11-700x500.png\" alt=\"\" width=\"700\" height=\"500\" class=\"alignnone size-medium wp-image-6077\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace11-700x500.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace11-768x549.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace11.png 933w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>WordPress「インポーターの実行」<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace10-700x504.png\" alt=\"\" width=\"700\" height=\"504\" class=\"alignnone size-medium wp-image-6076\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace10-700x504.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace10-768x553.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace10.png 932w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>エクスポートしたxmlファイルを選択（ここでは、hpcode.wordpress.2018-05-12_single.xml）<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace12-700x184.png\" alt=\"\" width=\"700\" height=\"184\" class=\"alignnone size-medium wp-image-6078\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace12-700x184.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace12-768x202.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace12.png 961w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>「添付ファイルをダウンロードしてインポートする」だけチェックを付けて「実行」。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace13.png\" alt=\"\" width=\"526\" height=\"416\" class=\"alignnone size-full wp-image-6079\" /></p>\n<p>完了したらこんな感じです。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace14.png\" alt=\"\" width=\"413\" height=\"137\" class=\"alignnone size-full wp-image-6080\" /></p>\n<p>同様の手順で<strong class=\"marker\">投稿ページと固定ページのxmlは確実にインポートする</strong>ようにしましょう！その他は状況に応じて判断します。</p>\n<h2><span id=\"i-6\">必要なプラグインのインストールと設定</span></h2>\n<p>プラグインまで合わせることはあまりないですが、入れておかないとデザインに影響しそうな部分は導入して設定しています。</p>\n<p>特に<strong class=\"marker\">カスタム投稿タイプ</strong>追加系は、合わせておかないとサイトを再現できない可能性が高いです。</p>\n<p>プラグイン → 新規追加<br />\nから必要なものを入れて「有効化」して設定していきましょう。</p>\n<p>個人的に「Custom Post Type UI」は入れて設定合わせること多いですね。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace15-700x313.png\" alt=\"\" width=\"700\" height=\"313\" class=\"alignnone size-medium wp-image-6082\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace15-700x313.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace15-768x343.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace15.png 1013w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h2><span id=\"i-7\">設定</span></h2>\n<p>各種設定を合わせていきます。</p>\n<h3><span id=\"i-8\">表示設定</span></h3>\n<p>ここは全く同じにして大丈夫です。<br />\nトップページの設定とか、表示件数などは、見栄えに関わってくるところなので、本番の環境に合わせましょう。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace16-700x619.png\" alt=\"\" width=\"700\" height=\"619\" class=\"alignnone size-medium wp-image-6083\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace16-700x619.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace16.png 724w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h3><span id=\"i-9\">パーマリンク設定</span></h3>\n<p>パーマリンクを設定しておかないと個別ページにアクセスできないことがあります。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/wordpress-trace17.png\" alt=\"\" width=\"585\" height=\"445\" class=\"alignnone size-full wp-image-6085\" /></p>\n<h2><span id=\"i-10\">ウィジェットやメニュー</span></h2>\n<p>ウィジェットやメニューも必要に応じて合わせておきましょう。</p>\n<ul>\n<li>ウィジェットは、外観 → ウィジェット</li>\n<li>メニューは、外観 → メニュー</li>\n</ul>\n<h2><span id=\"i-11\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>こうやってまとめると、やるべきことは結構たくさんありましたね。。笑</p>\n<p>ウィジェットとかメニュー、プラグインをどこまで合わせるかは各々のさじ加減によるかと思います。記事をインポートだけして、おおよそOKな場合もありますし、メニューやウィジェットまで再現しないと再現しきれないってサイトもあります。</p>\n<p>WordPressサイトを全体的に大きくカスタマイズする際は、Local by Flywheelを使ってできるだけ早くトレースしちゃいましょう。</p>\n<p>くれぐれも注意してほしいのは、<strong class=\"marker\">お客様のサイトへ間違ってインポートしたり設定を変更したりしないこと</strong>です。</p>\n<p>更新ボタンなど押す前は必ずドメインあたりを見て、ローカルであることを確認してから行いましょう。</p>\n","date":"May 12, 2018","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"1a78f03c-3f71-5909-a21f-eeaa70be2282"}}}