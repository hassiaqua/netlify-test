{"componentChunkName":"component---src-templates-post-js","path":"/jquery-pseudo/","result":{"data":{"wordpressPost":{"id":"ca714b9f-6a90-5b92-a34b-1e36263a638a","title":"疑似要素のCSSの値（content）をJavaScriptで制御する4パターン","slug":"jquery-pseudo","content":"<p><code>::after</code>や<code>::before</code>などの疑似要素はDOMではないため、jQueryで制御できません。</p>\n<p>しかし、無理やり変換する方法はあるので、その方法をまとめておきます。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">疑似要素はjQueryで制御できないのです...&gt;&lt;</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> プロパティを取得して変換するパターン</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> 変更後の疑似要素のクラスをあらかじめ用意しておくパターン</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">3</span> 疑似要素を上書きするパターン</a></li><li><a href=\"#data\"><span class=\"toc_number toc_depth_1\">4</span> data属性を使うパターン</a></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_1\">5</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">プロパティを取得して変換するパターン</span></h2>\n<p>実際に値を取得するプロセスがあるので、結構好きです。</p>\n<div class=\"btn pseudo\">メイン</div>\n<p>※ クリックで変換します</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;div class=\"pseudo\"&gt;メイン&lt;/div&gt;\r\n</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"css\">.pseudo::after {\r\n  content: '疑似要素';\r\n}</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"js\">var property = window.getComputedStyle($('.pseudo')[0], '::after').getPropertyValue('content');\r\nvar sheets = document.styleSheets,\r\n\tsheet = sheets[sheets.length - 1];\r\n\r\n$('.pseudo').hover(function() {\r\n\r\n\tif (sheet.insertRule) {\t// Webkit\r\n\t  sheet.insertRule('.pseudo::after { content:' + property + '\"変更完了\" }', sheet.cssRules.length);\r\n\t}\r\n\telse if (sheet.addRule) {  // IE\r\n\t\tsheet.addRule('.pseudo::after', 'content:' + property + '\"変更完了\"', -1);\r\n\t}\r\n});</code></pre>\n<p>参考：<a href=\"http://ithat.me/2016/09/29/js-jquery-pseudo-element-property-get-and-set\" rel=\"noopener\" target=\"_blank\">http://ithat.me/2016/09/29/js-jquery-pseudo-element-property-get-and-set</a></p>\n<h2><span id=\"i-2\">変更後の疑似要素のクラスをあらかじめ用意しておくパターン</span></h2>\n<p>個人的にはあまり汎用性がないような気もしますが、パターンとして一応&#8230;。</p>\n<div class=\"btn pseudo2-1\">メイン</div>\n<p>※ クリックで変換します</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"html\">&lt;div class=\"pseudo2\"&gt;メイン2&lt;/div&gt;\r\n</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"css\">.pseudo2-1::after {\r\n  content: '疑似要素2';\r\n}\r\n.pseudo2-2::after {\r\n  content: '疑似要素2変更完了';\r\n}</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-5\">コピー</span><code id=\"code-5\" class=\"js\">$(\".pseudo2-1\").hover(function() {\r\n\t// $(this).toggleClass('pseudo2-2');\r\n\t\t$(this).addClass('pseudo2-2');\r\n});</code></pre>\n<p><code>toggleClass</code>であれば、何回でも切り替え可能。</p>\n<p>参考：<a href=\"https://idotdesign.net/blog/web/js/non-dom-before-after/\" rel=\"noopener\" target=\"_blank\">https://idotdesign.net/blog/web/js/non-dom-before-after/</a></p>\n<h2><span id=\"i-3\">疑似要素を上書きするパターン</span></h2>\n<p><code>&lt;head&gt;</code>内に同じ疑似要素を追加して、上書きするパターンです。</p>\n<div class=\"btn pseudo3\">メイン</div>\n<p>※ クリックで変換します</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-6\">コピー</span><code id=\"code-6\" class=\"html\">&lt;div class=\"pseudo3\"&gt;メイン&lt;/div&gt;\r\n</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-7\">コピー</span><code id=\"code-7\" class=\"css\">.pseudo3::after {\r\n  content: '疑似要素3';\r\n}</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-8\">コピー</span><code id=\"code-8\" class=\"js\">var property3 = window.getComputedStyle($('.pseudo3')[0], '::after').getPropertyValue('content');\r\n$(\".pseudo3\").on(\"click\", function() {\r\n\t$('head').append('&lt;style&gt;.pseudo3::after { content: ' + property3 + '\"変更完了\" }&lt;/style&gt;');\r\n});</code></pre>\n<p>疑似要素の値の取得の仕方は、1と同様です。</p>\n<h2><span id=\"data\">data属性を使うパターン</span></h2>\n<p>シンプルで分かりやすい！<code>data</code>属性使える場面であれば、積極的に使っていきたい。</p>\n<div class=\"btn pseudo4\" data-name=\"疑似要素4\">メイン4</div>\n<p>※ クリックで変換します</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-9\">コピー</span><code id=\"code-9\" class=\"html\">&lt;div class=\"pseudo4\" data-name=\"疑似要素4\"&gt;メイン4&lt;/div&gt;\r\n</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-10\">コピー</span><code id=\"code-10\" class=\"css\">.pseudo4::after {\r\n  content: attr(data-name);\r\n}</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-11\">コピー</span><code id=\"code-11\" class=\"js\">$(\".pseudo4\").on(\"click\", function() {\r\n\t$(this).attr('data-name', '変更完了');\r\n});</code></pre>\n<p>参考：<a href=\"http://ithat.me/2015/11/30/jquery-css-pseudo-before-after-change\" rel=\"noopener\" target=\"_blank\">http://ithat.me/2015/11/30/jquery-css-pseudo-before-after-change</a></p>\n<p><h2><span id=\"i-4\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome --><br />\n疑似要素のCSSの値をJavaScriptで制御する方法でした。</p>\n<p>他のやり方も見つかり次第、追記していきます！</p>\n","date":"January 17, 2018","categories":[{"name":"JavaScript","slug":"javascript"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"ca714b9f-6a90-5b92-a34b-1e36263a638a"}}}