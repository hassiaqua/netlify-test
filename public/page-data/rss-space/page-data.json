{"componentChunkName":"component---src-templates-post-js","path":"/rss-space/","result":{"data":{"wordpressPost":{"id":"4ecc1e79-6204-56ef-a72d-3bf062003e67","title":"WordPressのRSSフィードの先頭が空白になってエラーになる時の対処方法","slug":"rss-space","content":"<p><img src=\"https://haniwaman.com/wp-content/uploads/2017/08/rss-empty.png\" alt=\"\" width=\"419\" height=\"354\" class=\"alignnone size-full wp-image-10328\" /></p>\n<p>雑な図ですみません。</p>\n<p>原因はよく分かりませんがWordPressが出力スルRSSフィードの先頭に空行が勝手に入ってエラーになることがあります。</p>\n<p><code>&lt;?xml</code>の宣言は1行目に書いてくださいって怒られるんですね。これを治す方法を紹介します。とは言ってもスマートな方法ではなく粗治療です。。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">includeのファイルを修正する荒治療です...</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#feedob_end_clean\"><span class=\"toc_number toc_depth_1\">1</span> feedファイルの先頭にob_end_clean();</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">2</span> おまけ：投稿者の表示を消す</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">3</span> おわり</a></li></ul></div>\n<h2><span id=\"feedob_end_clean\">feedファイルの先頭にob_end_clean();</span></h2>\n<p>「wp-includes」フォルダ配下にある</p>\n<ul>\n<li>feed-rss.php</li>\n<li>feed-rss2.php</li>\n</ul>\n<p>の先頭に</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"php\">&lt;?php ob_end_clean(); ?&gt;\r\n</code></pre>\n<p>わたしの場合はversion2.0で出力されているので、おそらくfeed-rss2.phpを修正すれば・・・ということで上手くいきました。</p>\n<p>後ろの行のコードも合わせるとこんな感じ（後ろのコードはもともともやつ。）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"php\">ob_end_clean();\r\nheader('Content-Type: ' . feed_content_type('rss2') . '; charset=' . get_option('blog_charset'), true);\r\n$more = 1;</code></pre>\n<p>以上です。feedに空行が入って困っている方は是非お試しを！</p>\n<h2><span id=\"i\">おまけ：投稿者の表示を消す</span></h2>\n<p>ついでに表示の内容もここで設定されています。</p>\n<p>例えば、投稿者の表示を消したければ、</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"php\">&lt;dc:creator&gt;&lt;![CDATA[&lt;?php the_author() ?&gt;]]&gt;&lt;/dc:creator&gt;\r\n</code></pre>\n<p>の記述を削除もしくは中身を消してあげることで可能です。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"php\">&lt;dc:creator&gt;&lt;/dc:creator&gt;\r\n</code></pre>\n<h2><span id=\"i-2\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>同じような事象が起こった方は一度お試しください。バージョンアップで消えるので、都度の設定が必要になりますが&#8230;。</p>\n","date":"December 24, 2017","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"4ecc1e79-6204-56ef-a72d-3bf062003e67"}}}