{"componentChunkName":"component---src-templates-post-js","path":"/functions-php-error/","result":{"data":{"wordpressPost":{"id":"070d0bd7-ca0a-54cd-b318-d15d4f6d42b7","title":"functions.phpのエラーで真っ白になるパターンと修正する方法","slug":"functions-php-error","content":"<p>なぜfunctions.phpを管理画面から編集できるようになっているのか理解に苦しむのですが、扱いに気をつけないとサイトが機能しなくなります。</p>\n<p>例えば、</p>\n<ul>\n<li>エラーメッセージが出て、サイトにアクセスできない</li>\n<li>画面が真っ白になる</li>\n<li>ログイン画面が開けない</li>\n</ul>\n<p>など。</p>\n<p>とりあえず、<strong class=\"marker\">記述ミスるとURLからサイトにアクセスすることが不可能になります</strong>。</p>\n<p>ですから基本的にはサーバーにアクセスして編集した方がいいのですが、いずれにしてもfunctions.phpを修正する上で気をつけておきたいポイントがあります。</p>\n<p>どういう時にエラーが大きるか分かれば対処もしやすいでしょう。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">WordPressのエラーパターンです。慌てず冷静に原因を探りましょう...</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#functionsphp\"><span class=\"toc_number toc_depth_1\">1</span> functions.phpでエラーになるパターン</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">1.1</span> 同じ関数名を定義</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_2\">1.2</span> 構文の誤り</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_2\">1.3</span> ファイルに無駄な空白、空行を作らないこと</a></li><li><a href=\"#UTF-8BOM\"><span class=\"toc_number toc_depth_2\">1.4</span> UTF-8、BOMなしで保存</a></li></ul></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_1\">2</span> エラーが起きた時（画面が真っ白になった時）の対処方法</a><ul><li><a href=\"#WP_DEBUG\"><span class=\"toc_number toc_depth_2\">2.1</span> WP_DEBUGを使う</a></li><li><a href=\"#functionphp\"><span class=\"toc_number toc_depth_2\">2.2</span> function.phpを修正</a></li></ul></li><li><a href=\"#functionsphp-2\"><span class=\"toc_number toc_depth_1\">3</span> functions.phpを編集する時の注意点</a><ul><li><a href=\"#i-5\"><span class=\"toc_number toc_depth_2\">3.1</span> サーバー上で編集すること</a></li><li><a href=\"#i-6\"><span class=\"toc_number toc_depth_2\">3.2</span> バックアップ取りましょう</a></li></ul></li><li><a href=\"#i-7\"><span class=\"toc_number toc_depth_1\">4</span> おわり</a></li></ul></div>\n<h2><span id=\"functionsphp\">functions.phpでエラーになるパターン</span></h2>\n<h3><span id=\"i\">同じ関数名を定義</span></h3>\n<p>同じ関数名を指定するとエラーになります。「定義が重複しているよ！」と怒られます。</p>\n<blockquote><p>Fatal error: Cannot redeclare hoge() (previously declared</p></blockquote>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"php\">&lt;?php\r\nfunction hoge() {\r\n}\r\nfunction hoge() {\r\n}\r\n?&gt;</code></pre>\n<h3><span id=\"i-2\">構文の誤り</span></h3>\n<p>phpの記述を誤ると怒られます。プログラミングする人なら何千回と見てきた「syntax error」のメッセージとともにアクセスできなくなります。</p>\n<blockquote><p>Parse error: syntax error</p></blockquote>\n<p>このエラーメッセージが出たときは、追加したコードに誤りがないか目を凝らして確認しましょう。</p>\n<h3><span id=\"i-3\">ファイルに無駄な空白、空行を作らないこと</span></h3>\n<p>以下のような<code>&lt;?php ?&gt;</code>で囲まれていな部分に余計な空白や空行があるとエラーになるみたいです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"php\">&lt;?php\r\nfunction hoge() {\r\n}\r\n?&gt;\r\n\r\n\r\n\r\n\r\n</code></pre>\n<p>エラーメッセージとしては以下のような感じ。</p>\n<blockquote><p>Warning: Cannot modify header information &#8211; headers already sent by (output started at /path/wp-content/themes/my-themes/functions.php:xxx) in /path/public_html/wp-includes/pluggable.php on line xxxx</p></blockquote>\n<p>※ 自分の環境では確認できず・・・</p>\n<h3><span id=\"UTF-8BOM\">UTF-8、BOMなしで保存</span></h3>\n<p>functions.phpは「UTF-8」「BOMなし」で保存してください。さもなければ、エラーになるそうです。</p>\n<p>※ 自分の環境では確認できず・・・</p>\n<h2><span id=\"i-4\">エラーが起きた時（画面が真っ白になった時）の対処方法</span></h2>\n<h3><span id=\"WP_DEBUG\">WP_DEBUGを使う</span></h3>\n<p>画面が真っ白な人は、どこでエラーが発生しているか確認するために<strong class=\"marker\">エラーメッセージを表示できるように設定を変更</strong>しましょう。<br />\n以下の通り編集します。記述がなければ追記しましょう。</p>\n<pre><span class=\"filename\">wp-config.php</span><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"php\">define( 'WP_DEBUG', true );</code></pre>\n<p>ファイルの場所はwp-contentとかと同じ階層です。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2017/09/functions-error.png\" alt=\"\" width=\"260\" height=\"272\" class=\"alignnone size-full wp-image-11789\" /></p>\n<h3><span id=\"functionphp\">function.phpを修正</span></h3>\n<p>エラーメッセージから、エラーの原因やエラーの場所が分かったらfunctions.phpを編集していきます。</p>\n<p>functions.phpの場所は以下の通り。<br />\n<span class=\"folder\">/wp-content/themes/my-theme/functions.php</span></p>\n<p>紹介したエラーのパターンを参考に修正してください。</p>\n<p>たいていの場合は、追加したところが問題だったりするので、追加したコードをゴッソリ削除すれば元に戻ります。</p>\n<h2><span id=\"functionsphp-2\">functions.phpを編集する時の注意点</span></h2>\n<h3><span id=\"i-5\">サーバー上で編集すること</span></h3>\n<p>phpに詳しくて慣れている人でも、ちょっとした構文ミスや同じ関数名で作っちゃったりといったことはあります。</p>\n<p>エラーが起こる前提で考えた時に、サーバーから編集した方がリスクは少ないです。なによりエラーになった時のストレスが違いますね。</p>\n<p>管理画面からだったら更新した瞬間にもう何もできなくなりますからね。「うっっぜええええ」。</p>\n<p>ということでサーバーで直接修正しましょう。エラーが出たらすぐに元に戻せます。</p>\n<h3><span id=\"i-6\">バックアップ取りましょう</span></h3>\n<p>日頃からバックアップをとっておくことが大事ですが、少なくともファイルを修正する前はローカルに残しておくようにしましょう。</p>\n<p>エラーが出た → 修正した → まだ直らない → さらに修正 → 泥沼（もうどこがエラーかわからないよー） → もとの状態に戻したいだけなのに・・・</p>\n<p>という状態に初心者のころはよく陥ってました。修正前のファイルが手元にあれば一瞬で解決することを半日かかったり。</p>\n<p>バックアップは基本です。何かを修正する前は必ずバックアップを取る癖を付けましょう。</p>\n<h2><span id=\"i-7\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>functions.phpを修正に関して、</p>\n<ul>\n<li>起こりがちなエラー</li>\n<li>エラーが起きた時の対処方法</li>\n<li>修正する上で気をつけること</li>\n</ul>\n<p>を紹介しました。</p>\n<p>WordPressの初心者のみならず、中級者くらいの人も画面真っ白にしてたりします。面倒でもサーバーと繋ぎならが編集する癖をつけるとよいでしょう。</p>\n","date":"December 24, 2017","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"070d0bd7-ca0a-54cd-b318-d15d4f6d42b7"}}}