{"componentChunkName":"component---src-templates-post-js","path":"/table-of-contents-plus/","result":{"data":{"wordpressPost":{"id":"e5edd1a4-05ac-54b9-9a68-a800851043f5","title":"WordPressで目次を自動生成できる「Table of Contents Plus」プラグインの使い方","slug":"table-of-contents-plus","content":"<p>WordPressの記事中に目次を自動作成してくれるプラグイン「Table of Contents Plus」の紹介です。</p>\n<p>目次があれば、読み手にとって優しいサイトになるだけでなく、Googleの検索結果にサイトリンクが付きやすくなる（かもしれない）というメリットもあったりします。</p>\n<p>とりあえず、<code>h2</code>や<code>h3</code>の見出しに対して目次を自動生成してくれたら満足という方は、「Table of Contents Plus」を使ってみてください！</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">最近は目次から内容を把握したりコンテンツ選んだりすることも増えてきました（わたしが記事を読む時）</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#Table_of_Contents_Plus\"><span class=\"toc_number toc_depth_1\">1</span> 「Table of Contents Plus」のインストール</a></li><li><a href=\"#Table_of_Contents_Plus-2\"><span class=\"toc_number toc_depth_1\">2</span> 「Table of Contents Plus」の設定</a><ul><li><a href=\"#CSS\"><span class=\"toc_number toc_depth_2\">2.1</span> 目次にオリジナルなCSSを当てる</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">2.2</span> 対象の見出し</a></li></ul></li><li><a href=\"#Table_of_Contents_Plus-3\"><span class=\"toc_number toc_depth_1\">3</span> 「Table of Contents Plus」の優先順位</a><ul><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_2\">3.1</span> 最初の見出しの上の攻防</a></li></ul></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">4</span> おわり</a></li></ul></div>\n<h2><span id=\"Table_of_Contents_Plus\">「Table of Contents Plus」のインストール</span></h2>\n<p>プラグイン → 新規追加 → キーワード「Table of Contents Plus」<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus2-700x215.png\" alt=\"\" class=\"alignnone size-medium wp-image-13369\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus2-700x215.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus2-768x236.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus2-1200x368.png 1200w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus2.png 1945w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>有効化します。<br />\n<img width=\"480\" src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus3-700x274.png\" alt=\"\" class=\"alignnone size-medium wp-image-13370\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus3-700x274.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus3-768x300.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus3.png 975w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h2><span id=\"Table_of_Contents_Plus-2\">「Table of Contents Plus」の設定</span></h2>\n<p>設定 → TOC+ から設定できます。<br />\n<img width=\"320\" src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus.png\" alt=\"\" class=\"alignnone size-full wp-image-13368\" /></p>\n<p>意識的に確認すべきは、「基本設定」の以下の項目です。</p>\n<table class=\"table\">\n<tr>\n<th width=\"120\">位置</th>\n<td>目次を記事中のどこに表示するか。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus4.png\" alt=\"\" class=\"alignnone size-full wp-image-13371\" /></td>\n</tr>\n<tr>\n<th>表示条件</th>\n<td>目次を表示するために必要な記事中の見出しの数。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus5.png\" alt=\"\" class=\"alignnone size-full wp-image-13373\" /></td>\n</tr>\n<tr>\n<th>以下のコンテンツタイプを自動挿入</th>\n<td>どの投稿（投稿タイプ）で目次を表示させるか。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus6.png\" alt=\"\" class=\"alignnone size-full wp-image-13374\" /></td>\n</tr>\n<tr>\n<th>見出しテキスト</th>\n<td>目次自体にタイトルを付けるかどうか。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus7-700x147.png\" alt=\"\" class=\"alignnone size-medium wp-image-13375\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus7-700x147.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus7.png 751w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></td>\n</tr>\n<tr>\n<th>階層表示</th>\n<td><code>h2</code>や<code>h3</code>の違いで階層化させるかどうか。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus8.png\" alt=\"\" class=\"alignnone size-full wp-image-13376\" /></td>\n</tr>\n<tr>\n<th>番号振り</th>\n<td>見出しの順番に応じて番号を付けるかどうか<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus9.png\" alt=\"\" class=\"alignnone size-full wp-image-13377\" /></td>\n</tr>\n<tr>\n<th>スムーズ・スクロール効果を有効化</th>\n<td>目次をクリックした時にスムーススクロールさせるかどうか<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus10-700x73.png\" alt=\"\" class=\"alignnone size-medium wp-image-13378\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus10-700x73.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus10-768x80.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus10.png 874w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></td>\n</tr>\n<tr>\n<th>外観</th>\n<td>見た目をどうするか。わたしはプラグインが付ける設定は極力排除するような指定としています。<br />\n\t\t<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus11-700x430.png\" alt=\"\" class=\"alignnone size-medium wp-image-13379\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus11-700x430.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus11-768x472.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus11.png 894w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></td>\n</tr>\n</table>\n<p>この設定を適応させることで、以下のような表示で目次を作ることができます。<br />\n<img width=\"480\" src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus12.png\" alt=\"\" class=\"alignnone size-full wp-image-13382\" /></p>\n<h3><span id=\"CSS\">目次にオリジナルなCSSを当てる</span></h3>\n<p>「Table of Contents Plus」で作成した目次にオリジナルなCSSを当てたい場合は、「上級者向け」の設定を変更して、CSSを書き足してあげることで変更することができます。</p>\n<p>「上級者向け」の横のリンクをクリックして開き、「CSS ファイルを除外」にチェックを入れます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus13-700x216.png\" alt=\"\" class=\"alignnone size-medium wp-image-13383\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus13-700x216.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus13-768x237.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus13-1200x370.png 1200w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus13.png 1581w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>目次を見てみると、基本的な<code>ul</code>や<code>li</code>が適応されているだけの状態となりました。<br />\n<img width=\"480\" src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus14.png\" alt=\"\" class=\"alignnone size-full wp-image-13384\" /></p>\n<p>TOC+プラグインが出力するHTMLタグを見てみましょう（長すぎたので一部割愛&#8230;）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;div id=\"toc_container\" class=\"no_bullets\"&gt;\r\n  &lt;p class=\"toc_title\"&gt;目次&lt;/p&gt;\r\n  &lt;ul class=\"toc_list\"&gt;\r\n    &lt;li&gt;\r\n      &lt;a href=\"#Adobe3\"&gt;\r\n        &lt;span class=\"toc_number toc_depth_1\"&gt;1&lt;/span&gt;Adobeツールを格安で入手する3つの方法\r\n      &lt;/a&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt;\r\n          &lt;a href=\"#Adobe\"&gt;\r\n            &lt;span class=\"toc_number toc_depth_2\"&gt;1.1&lt;/span&gt;Adobe公式でのキャンペーンを狙う！\r\n          &lt;/a&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;\r\n          &lt;a href=\"#Amazon\"&gt;\r\n            &lt;span class=\"toc_number toc_depth_2\"&gt;1.2&lt;/span&gt;Amazonのセールを狙う！\r\n          &lt;/a&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;\r\n          &lt;a href=\"#i\"&gt;\r\n            &lt;span class=\"toc_number toc_depth_2\"&gt;1.3&lt;/span&gt;オンラインスクール受講で無料\r\n          &lt;/a&gt;\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/li&gt;\r\n    &lt;li&gt;\r\n      &lt;a href=\"#i-3\"&gt;\r\n        &lt;span class=\"toc_number toc_depth_1\"&gt;3&lt;/span&gt;おわり\r\n      &lt;/a&gt;\r\n    &lt;/li&gt;\r\n  &lt;/ul&gt;\r\n&lt;/div&gt;</code></pre>\n<p>HTMLタグで当たっているクラスを見る限りは以下のようなidやclassに対して、CSSを作っていけばいいはずです。</p>\n<ul>\n<li><code>#toc_container</code></li>\n<li><code>.toc_title</code></li>\n<li><code>.toc_list</code></li>\n<li><code>.toc_list li</code></li>\n<li><code>.toc_list li a</code></li>\n<li><code>.toc_list li ul</code></li>\n</ul>\n<p>この記事では詳しくCSSの作り方は紹介しませんが、以下のメニューパーツなどを参考にご自身のサイトに合うように作成していただければと思います。<br />\n→ <a href=\"https://haniwaman.com/parts/category/menu/\" rel=\"noopener\" target=\"_blank\">メニュー | コピペで簡単！Webパーツ屋</a></p>\n<h3><span id=\"i\">対象の見出し</span></h3>\n<p>「上級者向け」の設定から、<strong class=\"marker\">対象にする見出しレベルも指定する</strong>ことができます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus15-700x184.png\" alt=\"\" class=\"alignnone size-medium wp-image-13393\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus15-700x184.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus15-768x202.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus15.png 998w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>個人的には多くても<code>h4</code>までかなと思います。目次が長すぎても探すのが手間だし、読む気がなくなる気がするので&#8230;</p>\n<p>どこまでの見出しを対象とするかは、サイトの作り方（1記事あたりのコンテンツ量）などと相談して決めるといいかもしれません。</p>\n<h2><span id=\"Table_of_Contents_Plus-3\">「Table of Contents Plus」の優先順位</span></h2>\n<p>裏側の細かい話にはなりますが、目次はフィルターフックでコンテンツ内容を書き換えることによって表示されています。</p>\n<p>具体的には、以下のコードによって込みこまれています（た、たぶん・・・）</p>\n<pre><span class=\"filename\">/table-of-contents-plus/toc.php</span><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"php\">add_filter( 'the_content', array(&amp;$this, 'the_content'), 100 );\r\n</code></pre>\n<p>この数字の100が優先順位です。小さい方が優先される仕組みとなっているので、<code>add_filter( 'the_content', 'hoge', 10 );</code>があった時に先に実行されるのは10の方です。</p>\n<p>10で書き換えられた内容を、100の処理で書き換えるという順番ですね。</p>\n<h3><span id=\"i-2\">最初の見出しの上の攻防</span></h3>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus16-700x638.png\" alt=\"\" class=\"alignnone size-medium wp-image-13396\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus16-700x638.png 700w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus16-768x700.png 768w, https://haniwaman.com/wp-content/uploads/2019/02/table-of-contents-plus16.png 1138w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>最初の見出しの前に、広告などを動的に表示させる処理を入れたい方も多いと思います。こういう時に、優先順位の概念が分かっていないと、目次の前後の関係を制御しきれません。</p>\n<ul>\n<li>最初の見出しの前に目次を表示させて → 最初の見出しの前に広告を表示させる、という順番なら、目次の後に広告</li>\n<li>最初の見出しの前に広告を表示させて → 最初の見出しの前に目次を表示させる、という順番なら、目次の前に広告</li>\n</ul>\n<p>具体的には、「Table of Contents Plus」で作られる目次の上に表示させたい場合は、100より小さい数字。目次の下に表示させたいなら、100より大きい数字ということです。</p>\n<p><code>add_filter( 'the_content', 'hoge', 10 );</code>で最初の見出しの前に影響を与える処理を<span class=\"filename\">functions.php</span>に追加した場合は、目次の前にコンテンツが挿入されます。</p>\n<h2><span id=\"i-3\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>WordPressで目次を自動生成してくれる「Table of Contents Plus」プラグインの使い方の紹介でした。</p>\n<p>個人的には目次からコンテンツを選ぶことが多いので、必須レベルでほしい機能だなと思います。「Table of Contents Plus」を使えばWordPressに簡単に追加できるので、ぜひ導入してみてください！</p>\n","date":"February 05, 2019","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":[{"name":"WordPressプラグイン","slug":"plugin"}],"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"e5edd1a4-05ac-54b9-9a68-a800851043f5"}}}