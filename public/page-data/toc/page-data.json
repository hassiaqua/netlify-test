{"componentChunkName":"component---src-templates-post-js","path":"/toc/","result":{"data":{"wordpressPost":{"id":"5bd38407-9023-5f94-8c23-b4b30c9aeec9","title":"見出しから目次を自動生成してくれるjQueryライブラリ「TOC」のダウンロードと使い方！","slug":"toc","content":"<p>見出しから目次を自動生成してくれるJqueryライブラリ「TOC」を紹介します。</p>\n<p>目次は、ユーザービリリティ向上のために欠かせないものとなっています。1記事ずつ手で目次を生成しているのはとても手間がかかるので、「TOC」を使って手軽に目次を作っていきましょう！</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">ちなみに「TOC」は「Table of Contents」の略で日本語に訳すと「目次」という意味になります！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#TOC\"><span class=\"toc_number toc_depth_1\">1</span> TOCのダウンロード</a></li><li><a href=\"#TOC-2\"><span class=\"toc_number toc_depth_1\">2</span> TOCの読み込み</a></li><li><a href=\"#TOC-3\"><span class=\"toc_number toc_depth_1\">3</span> TOCの設定</a></li><li><a href=\"#TOCHTML\"><span class=\"toc_number toc_depth_1\">4</span> TOCのHTML構造</a></li><li><a href=\"#TOC-4\"><span class=\"toc_number toc_depth_1\">5</span> TOCのデザインサンプル</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">6</span> おわり</a></li></ul></div>\n<h2><span id=\"TOC\">TOCのダウンロード</span></h2>\n<p>TOCのライブラリは以下からダウンロードできます。ただし<strong class=\"marker\">最新版は必要なファイルが揃っていない</strong>ため注意が必要です。<br />\n→ <a href=\"https://github.com/jgallen23/toc\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/jgallen23/toc</a></p>\n<p>仕方ないので、バージョンを落としてダウンロードしていきましょう。</p>\n<p>「Releases」を選択してください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/03/toc-700x427.png\" alt=\"\" width=\"700\" height=\"427\" class=\"alignnone size-medium wp-image-4814\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/03/toc-700x427.png 700w, https://haniwaman.com/wp-content/uploads/2018/03/toc-768x469.png 768w, https://haniwaman.com/wp-content/uploads/2018/03/toc.png 1001w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>かなり古くなりますが、、「0.3.2」のバージョンのzipファイルをダウンロードします。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/03/toc2.png\" alt=\"\" width=\"637\" height=\"343\" class=\"alignnone size-full wp-image-4815\" /></p>\n<p>zipファイルを解凍してdistフォルダの中身を確認しておいてください。以下のファイルを使います。</p>\n<p><span class=\"filename\">dist/toc.min.js</span></p>\n<h2><span id=\"TOC-2\">TOCの読み込み</span></h2>\n<p>まずは、先程ダウンロードした<span class=\"filename\">toc.min.js</span>ファイルを読み込みます。<br />\njQueryを先に読み込んでいる必要があります。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"dist/toc.min.js\"&gt;&lt;/script&gt;\r\n</code></pre>\n<p>tocの設定です。いくつかの項目をオプションとして指定できますが、後ほど紹介していきます。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"js\">jQuery('#toc').toc();</code>\r\n</pre>\n<p>目次を表示したい位置に以下のタグを挿入してください。</p>\n<pre><code id=\"code-1\" class=\"html\">&lt;div id=\"toc\"&gt;&lt;/div&gt;\r\n</code></pre>\n<p>これらのソースを読み込むと、表示されているすべての見出しを取得して表示します。現時点のわたしのページだと、以下のような感じで表示されています。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/03/toc3-700x119.png\" alt=\"\" width=\"700\" height=\"119\" class=\"alignnone size-medium wp-image-4820\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/03/toc3-700x119.png 700w, https://haniwaman.com/wp-content/uploads/2018/03/toc3.png 723w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>h1や、コンテンツ外の見出しも含まれてしまうので、意図したものではありません。ここからカスタマイズしていきましょう！</p>\n<h2><span id=\"TOC-3\">TOCの設定</span></h2>\n<p>先程に設置した以下のソースにオプションを追加していきます。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"js\">jQuery('#toc').toc();</code>\r\n</pre>\n<p>最低限必要なのは、見出しを取得する範囲と、取得する見出しレベルの指定です。</p>\n<pre><code id=\"code-2\" class=\"js\">jQuery('#toc').toc({\r\n\t'container': 'article.post', /* 見出しを取得するエリア */\r\n\t'selectors': 'h2, h3', /* 取得する見出しレベル */\r\n});</code>\r\n</pre>\n<p>この設定を適応させた状態で表示を確認してみると、h1タグやコンテンツ以外の余計な見出しは反映されなくなりました！<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/03/toc4-700x113.png\" alt=\"\" width=\"700\" height=\"113\" class=\"alignnone size-medium wp-image-4825\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/03/toc4-700x113.png 700w, https://haniwaman.com/wp-content/uploads/2018/03/toc4.png 731w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>他にもオプションはあります。物足りないと感じたら公式から使えるものがないか確認してみるといいでしょう。<br />\n公式 → <a href=\"http://projects.jga.me/toc/#toc4\" rel=\"noopener noreferrer\" target=\"_blank\">TOC | jQuery Table of Contents Plugi</a></p>\n<h2><span id=\"TOCHTML\">TOCのHTML構造</span></h2>\n<p>表示される目次のHTMLタグを確認すると以下のようになっています。</p>\n<pre><code id=\"code-2\" class=\"html\">&lt;div id=\"toc\"&gt;\r\n\t&lt;ul&gt;\r\n\t\t&lt;li class=\"toc-h2 toc-active\"&gt;&lt;a href=\"#toc-h2\"&gt;h2&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;li class=\"toc-h2\"&gt;&lt;a href=\"#toc-h2-2\"&gt;h2&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;li class=\"toc-h3\"&gt;&lt;a href=\"#toc-h3\"&gt;h3&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;li class=\"toc-h3\"&gt;&lt;a href=\"#toc-h3-2\"&gt;h3&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;li class=\"toc-h2\"&gt;&lt;a href=\"#toc-h2-2\"&gt;h2&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;/ul&gt;\r\n&lt;/div&gt;</code></pre>\n<p><code>class=\"toc-active\"</code>は、見られている（表示されている）見出しエリアに自動的に付与されるクラスです。Developer toolなどでスクロールしながらクラスを見ると<code>toc-active</code>が見出しをどんどん移動しているのが分かります。</p>\n<p>各要素にクラスが適応されているので、デザインはしやすそうです。</p>\n<h2><span id=\"TOC-4\">TOCのデザインサンプル</span></h2>\n<p>簡単ですが、デザインのサンプルを作りました。</p>\n<p>目次のデザインを作る際に意識した方がいいと思うのは、「見出しの階層構造が分かりやすい」こと。人目でどのレベルのコンテンツか分かるとユーザーも選びやすいのではないかと思います。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"css\">#toc ul {\r\n\tlist-style: none;\r\n}\r\n#toc li {\r\n\tmargin-bottom: .4em;\r\n}\r\n#toc li.toc-h3 {\r\n\tpadding-left: 1em;\r\n}\r\n#toc a {\r\n\ttext-decoration: none;\r\n\tfont-size: .95em;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n#toc li.toc-h2 a::before {\r\n\tcontent: \"●\";\r\n\tmargin-right: .2em;\r\n}\r\n#toc li.toc-h3 a {\r\n\tfont-size: .9em;\r\n  color: #666;\r\n}\r\n#toc li.toc-h3 a::before {\r\n\tcontent: \"-\";\r\n\tmargin-right: .2em;\r\n}</code></pre>\n<p>適応した際の見栄えは以下のような感じです。シンプルですが、階層の違いは分かりやすくなっているかと思います。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/03/toc5.png\" alt=\"\" width=\"498\" height=\"242\" class=\"alignnone size-full wp-image-4837\" /></p>\n<p>色や、目次のタイトルなども付け加えて、みなさまのサイトに合わせてカスタマイズしていってください！</p>\n<h2><span id=\"i\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>jQueryライブラリ「TOC」のダウンロードと使い方の紹介でした。</p>\n<p>個人的には、表示されているエリアの<code>toc-active</code>クラスが用意されていることに興奮しました。サイドメニューで追尾するもよし、スマホではポップアップで目次を出してあげるもよし、いろいろやりたいことが膨らみますね。</p>\n","date":"March 08, 2018","categories":[{"name":"JavaScript","slug":"javascript"}],"tags":[{"name":"jQueryライブラリ","slug":"jquery"}],"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"5bd38407-9023-5f94-8c23-b4b30c9aeec9"}}}