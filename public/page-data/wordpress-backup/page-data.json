{"componentChunkName":"component---src-templates-post-js","path":"/wordpress-backup/","result":{"data":{"wordpressPost":{"id":"48a63284-b98c-54af-82de-266eba33ddf1","title":"WordPressのバックアップ方法と復元するまでの流れ（プラグインなし）","slug":"wordpress-backup","content":"<p>WordPressで新規ドメインで1から育てたサイトというのは、大変な愛着がわくものです。</p>\n<p>抱きしめて頬をすりすりしたい気持ちは、おそらく<strong>みなさんと共有できることと信じてます。</strong></p>\n<p>そんな大事なサイトも予期せぬ障害、サーバデータ削除などで、簡単に消え去ってしまいます。<br />\n育てるのは大変でも、なくなるときは一瞬です。</p>\n<p>だからこそ言っておきたいことが1つ。</p>\n<p><span style=\"color: #ff0000; font-size: 18pt;\"><strong>バックアップしよう！</strong></span></p>\n<p>ということで、<br />\nWordPressでのバックアップ方法を紹介します。今回はプラグインを使わずに物理的に行う方法です。</p>\n<p>おまけとして、ちゃんと復元できるかも確認していきます。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">復元できなきゃバックアップの意味がありません...&gt;&lt;</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#3\"><span class=\"toc_number toc_depth_1\">1</span> 3つのフォルダをダウンロード</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">2</span> 記事の抽出</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">3</span> 「メニュー」や「設定」、プラグイン設定内容などをメモ</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">4</span> バックアップファイルなどは一つのフォルダにまとめておこう！</a></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_1\">5</span> 実際に復元してみる！</a><ul><li><a href=\"#3-2\"><span class=\"toc_number toc_depth_2\">5.1</span> ローカルから3つのファイルをアップロード</a></li><li><a href=\"#i-5\"><span class=\"toc_number toc_depth_2\">5.2</span> テーマ変更</a></li><li><a href=\"#i-6\"><span class=\"toc_number toc_depth_2\">5.3</span> 記事の復元</a></li><li><a href=\"#i-7\"><span class=\"toc_number toc_depth_2\">5.4</span> プラグインを有効化</a></li><li><a href=\"#i-8\"><span class=\"toc_number toc_depth_2\">5.5</span> メニューや設定、プラグイン設定などを前のやつに戻す</a></li></ul></li><li><a href=\"#i-9\"><span class=\"toc_number toc_depth_1\">6</span> おわり</a></li></ul></div>\n<h2><span id=\"3\">3つのフォルダをダウンロード</span></h2>\n<p>まずはサーバー上の「wp-content」フォルダ配下ある3種類のフォルダをダウンロードします。</p>\n<ul>\n<li>plugins</li>\n<li>themes</li>\n<li>uploads</li>\n</ul>\n<p>ダウンロードするのは上の3種類です。</p>\n<ul>\n<li>「plugins」は、プラグインの一覧。</li>\n<li>「themes」は、テーマの一覧。</li>\n<li>「uploads」は、画像の一覧。</li>\n</ul>\n<p>がそれぞれ格納されています。（おおざっぱ）</p>\n<p>すべてを<span style=\"color: #ff0000;\"><strong>「ローカル」環境にダウンロード</strong></span>します。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_02.png\"><img class=\"alignnone  wp-image-5910\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_02.png\" alt=\"wp_bk_02\" width=\"525\" height=\"373\" /></a></p>\n<h2><span id=\"i\">記事の抽出</span></h2>\n<p>WordPressで追加した記事は、DB上に保存されます。それらの情報を復元できるように抜き出しておきます。</p>\n<p>WordPressのダッシュボードから<br />\n「ツール」⇒「エクスポート」を開きます。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_03.png\"><img class=\"alignnone size-full wp-image-5913\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_03.png\" alt=\"wp_bk_03\" width=\"323\" height=\"202\" /></a></p>\n<p>「すべてのコンテンツ」のラジオボタンを選択して、エクスポートファイルをダウンロードします。<br />\n保存時の名前は拡張子さえ変えなければ何でもOKです。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_12.png\"><img class=\"alignnone  wp-image-5946\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_12.png\" alt=\"wp_bk_12\" width=\"590\" height=\"326\" /></a></p>\n<h2><span id=\"i-2\">「メニュー」や「設定」、プラグイン設定内容などをメモ</span></h2>\n<p>オリジナルな箇所と言えば、<br />\n「メニュー」「ウィジェット」や「設定」の項目ですね。</p>\n<p>「設定」には、サイトタイトルから画像の大きさ、パーマリンクの設定など、大事な情報がたくさんあります。</p>\n<p>これらの項目は、画面のスクリーンショットを取るなどして、確認できるようにしておくと良いでしょう！<br />\n（復元時に見比べられるような形であれば何でもOKです！）</p>\n<p>外観の</p>\n<ul>\n<li>メニュー</li>\n<li>ウィジェット</li>\n<li>カスタマイザー</li>\n</ul>\n<p>など。</p>\n<p>設定では、</p>\n<ul>\n<li>一般</li>\n<li>投稿設定</li>\n<li>表示設定</li>\n<li>ディスカッション</li>\n<li>メディア</li>\n<li>パーマリンク設定</li>\n</ul>\n<p>の5つの内容を記録しておけばいいと思います。</p>\n<p>プラグインの設定内容についても、片っ端から画面ショット撮っていく感じでいいと思います。<br />\nまた、プラグインによっては<strong>エクスポート機能</strong>が付いているものもあるで、有効に活用していきましょう。</p>\n<h2><span id=\"i-3\">バックアップファイルなどは一つのフォルダにまとめておこう！</span></h2>\n<p>以上がバックアップの流れ＋復元に必要になるファイルたちです。</p>\n<p>ここまでで手に入れたファイルたちは、バックアップファイルとして1つのフォルダにまとめて置いておくと良いでしょう。<br />\nわたしの場合はこんな感じです。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_14.png\"><img class=\"alignnone  wp-image-5954\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_14.png\" alt=\"wp_bk_14\" width=\"562\" height=\"342\" /></a></p>\n<p>「wp-content」の中に、<br />\npluginsやthemes、uploadsのファイルが入っています。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_15.png\"><img class=\"alignnone  wp-image-5956\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_15.png\" alt=\"wp_bk_15\" width=\"564\" height=\"343\" /></a></p>\n<p>他のフォルダには、画面ショットやテキストメモなどが格納されています。</p>\n<h2><span id=\"i-4\">実際に復元してみる！</span></h2>\n<p>WordPressのバックアップ方法の説明はインターネット上にたくさんありますが、<br />\n「ホントに復活するの？」って疑問に思っていたので「ちゃんと復元までできるんだ」ということを証明しておきます。</p>\n<p>真っ新なWordPressファイル一式をサーバーにインストールしたところから話を始めます。<br />\nダッシュボードを開いても当然何も入っていない状態ですね。</p>\n<h3><span id=\"3-2\">ローカルから3つのファイルをアップロード</span></h3>\n<p>まずは、サーバーからダウンロードしておいた、3種類のファイルをアップロードします。</p>\n<ul>\n<li>plugins</li>\n<li>uploads</li>\n<li>themes</li>\n</ul>\n<p>の3つのファイルですね。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_02.png\"><img class=\"alignnone  wp-image-5910\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_02.png\" alt=\"wp_bk_02\" width=\"489\" height=\"348\" /></a></p>\n<p>これらを「<span style=\"font-size: 14pt;\"><strong>wp_content</strong></span>」フォルダの中にアップロードします。<br />\nすべて上書きでOKです。</p>\n<h3><span id=\"i-5\">テーマ変更</span></h3>\n<p>「themes」ファイルをアップロードしたので、<br />\n自分が以前に選択していたテーマを選択できるようになります。</p>\n<p>ダッシュボードの「外観」⇒「テーマ」からテーマを変更しましょう！<br />\nサイトを確認すると、見た目がほぼほぼ戻っているのが分かると思います。</p>\n<h3><span id=\"i-6\">記事の復元</span></h3>\n<p>投稿記事を個別記事を復元していきます。<br />\nダッシュボードで「ツール」⇒「インポート」を選択します。</p>\n<p>インポートに色んな項目がありますが、<br />\n「WordPress」を選択します。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_09.png\"><img class=\"alignnone  wp-image-5919\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_09.png\" alt=\"wp_bk_09\" width=\"564\" height=\"282\" /></a></p>\n<p>バックアップの時にエクスポートした投稿記事のsqlファイルを選択して、<br />\n「ファイルをアップロードしてインポート」ボタンを選択します。<br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_10.png\"><img class=\"alignnone  wp-image-5920\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_10.png\" alt=\"wp_bk_10\" width=\"537\" height=\"138\" /></a></p>\n<p>次にインポートする人を聞かれるので、「or assign posts to an existing user」のユーザを選択しています。<br />\n（ここで選択したユーザ名が投稿者とかで使われるようになる。）</p>\n<p>大事なのは、その下にある「Import Attachments」。<br />\nここは<span style=\"color: #ff0000; font-size: 18pt;\"><strong>絶対にチェック付けてください！！！</strong></span><br />\n<a href=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_13.png\"><img class=\"alignnone size-full wp-image-5947\" src=\"https://haniwaman.com/wp-content/uploads/2014/08/wp_bk_13.png\" alt=\"wp_bk_13\" width=\"499\" height=\"388\" /></a></p>\n<p>記事とアイキャッチ画像の対応付けがされなかったりと色々が不具合が起こります。<br />\n入力が終わったら「Submit」をポチッ。</p>\n<p>「All done」が表示されたらインポート完了です！</p>\n<h3><span id=\"i-7\">プラグインを有効化</span></h3>\n<p>最初の方に「plugins」フォルダをサーバーにアップロードしたかと思いますが、<br />\nこれで以前のプラグインはすべて入っている状態になっています。</p>\n<p>ただ、すべて無効化されているので、<br />\n全部<strong>有効化</strong>してください。</p>\n<h3><span id=\"i-8\">メニューや設定、プラグイン設定などを前のやつに戻す</span></h3>\n<p>泥臭いですが、メニューや設定の項目を前のと見比べながら戻していきます。<br />\n（まぁ、今回紹介している方法が全体的に泥臭いですが。）</p>\n<p>「外観」の</p>\n<ul>\n<li>メニュー</li>\n<li>ウィジェット</li>\n<li>カスタマイザー</li>\n</ul>\n<p>「設定」の</p>\n<ul>\n<li>一般</li>\n<li>投稿設定</li>\n<li>表示設定</li>\n<li>ディスカッション</li>\n<li>メディア</li>\n<li>パーマリンク設定</li>\n</ul>\n<p>各プラグインの設定など、<br />\nメモ（スクリーンショットでも）しておいた前のやつに戻しましょう！</p>\n<p><h2><span id=\"i-9\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome --><br />\n一応復元までできたので、この方法で大丈夫かなとは思います。<br />\n（少なくとも完全に消え去ることはないでしょう。）</p>\n","date":"December 24, 2017","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"48a63284-b98c-54af-82de-266eba33ddf1"}}}