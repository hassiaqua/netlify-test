{"componentChunkName":"component---src-templates-post-js","path":"/every-category/","result":{"data":{"wordpressPost":{"id":"519a7720-1673-5c27-b060-50b6de17cac7","title":"WordPressのトップページに任意のカテゴリー毎の一覧を作ろう！","slug":"every-category","content":"<p>WordPressのトップページでよく見る「カテゴリーごとで記事一覧を整理する」方法を紹介していきます。管理画面の「メニュー」から各カテゴリーごとの記事数や表示するカテゴリーの選択ができるようにしたので<strong class=\"marker\">とても管理しやすいです！</strong></p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">ブログのトップページとかでよく見るあれです！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> 管理画面のメニューに新しいメニューを登録</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> メニューを取得して一覧を表示するコード</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">3</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">管理画面のメニューに新しいメニューを登録</span></h2>\n<p>外観 → メニュー → 新規メニューを作成<br />\nからメニューを作成します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category-700x468.png\" alt=\"\" width=\"700\" height=\"468\" class=\"alignnone size-medium wp-image-6287\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category-700x468.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category-768x514.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category-1200x803.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category.png 1227w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>任意のメニュー名を指定して「メニューを保存」をクリック。<br />\n※ <strong class=\"marker\">この記事のコードをそのまま使いたい方は同じ「catelist」のメニュー名で作ってください！</strong><br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category2-700x331.png\" alt=\"\" width=\"700\" height=\"331\" class=\"alignnone size-medium wp-image-6288\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category2-700x331.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category2-768x363.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category2-1200x567.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category2.png 1508w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>表示させたいカテゴリーを選択して「メニューに追加」をクリック。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category3-700x473.png\" alt=\"\" width=\"700\" height=\"473\" class=\"alignnone size-medium wp-image-6289\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category3-700x473.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category3-768x519.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category3-1200x811.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category3.png 1495w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>メニュー構造に追加されたことを確認したら「メニューを保存」をクリックして保存します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category4-700x362.png\" alt=\"\" width=\"700\" height=\"362\" class=\"alignnone size-medium wp-image-6290\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category4-700x362.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category4-768x398.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category4-1200x621.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category4.png 1485w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>表示させる件数を「タイトル属性」に設定する仕組みとします。<br />\n右上の「表示オプション」から「タイトル属性」にチェック。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category5-700x409.png\" alt=\"\" width=\"700\" height=\"409\" class=\"alignnone size-medium wp-image-6294\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category5-700x409.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category5-768x449.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category5-1200x701.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category5.png 1493w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>表示させたい記事数を入力して「メニューを保存」をクリック。<br />\nちなみにカテゴリー名は、その上の「ナビゲーションラベル」から変更できます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category6-700x389.png\" alt=\"\" width=\"700\" height=\"389\" class=\"alignnone size-medium wp-image-6295\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category6-700x389.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category6-768x426.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category6-1200x666.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category6.png 1482w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>メニューの設定はは以上です！</p>\n<h2><span id=\"i-2\">メニューを取得して一覧を表示するコード</span></h2>\n<p>それでは、作成したメニューからカテゴリーごとの一覧を表示させるためのコードを書いていきます。<span class=\"filename\">front-page.php</span>など、ご自身のサイトのトップページ用に使っているテンプレートに記載するといいかと思います。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"php\">&lt;?php\r\n$my_catelist = wp_get_nav_menu_items( 'catelist' ); // メニュー名を指定\r\nforeach ( $my_catelist as $value ) :\r\n\tif ( $value-&gt;object !== 'category' ) {\r\n\t\tcontinue; // カテゴリー以外はスルー\r\n\t}\r\n\t$my_cate_id = $value-&gt;object_id; // カテゴリーID\r\n\t$my_cate_title = $value-&gt;title; // カテゴリー名（ナビゲーションラベル）\r\n\t$my_cate_num = ctype_digit( $value-&gt;attr_title ) ? $value-&gt;attr_title : '0'; // タイトル属性\r\n\r\n\t$cate_query = new WP_Query( array( 'posts_per_page' =&gt; $my_cate_num, 'category__in' =&gt; $my_cate_id ) );\r\n\techo '&lt;h2 class=\"page-title\"&gt;' . $my_cate_title . '&lt;/h2&gt;';\r\n\tif ( $cate_query-&gt;have_posts() ) :\r\n\t\twhile ( $cate_query-&gt;have_posts() ) :\r\n\t\t\t$cate_query-&gt;the_post();\r\n\t\t\tget_template_part( 'template-parts/content', 'archive' );\r\n\t\tendwhile;\r\n\tendif;\r\n\twp_reset_postdata();\r\n\techo '&lt;div style=\"text-align:center;\"&gt;&lt;a class=\"btn\" href=\"' . get_category_link( $my_cate_id ) . '\"&gt;' . $my_cate_title . 'の一覧を見る&lt;/a&gt;&lt;/div&gt;';\r\nendforeach;\r\n?&gt;</code></pre>\n<p><code>get_template_part( 'template-parts/content', 'archive' );</code>の部分はご自身の一覧で表示する書く記事のパーツを入れてもらえればと思います。WordPressのループ内の処理ですね。<br />\n（ここがなに言っているか分からないという方は、まだ早い気がするので、誰かにお願いした方がいいかもしれません。。）</p>\n<p>その他、HTMLの部分はご自身の好きな要素やクラス名に変更してください。</p>\n<p>参考：<a href=\"http://wpdocs.osdn.jp/%E9%96%A2%E6%95%B0%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9/wp_get_nav_menu_items\" rel=\"noopener noreferrer\" target=\"_blank\">関数リファレンス/wp get nav menu items &#8211; WordPress Codex 日本語版</a></p>\n<p>わたしの例だとこんな感じになります。※ クラス名やHTML構造はわたしのサイトに合致するようになっているので、ご自身のサイトに合わせて修正してくださいね。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category7-700x1670.png\" alt=\"\" width=\"500\" class=\"alignnone size-medium wp-image-6300\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/every-category7-700x1670.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/every-category7-768x1832.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/every-category7-1200x2863.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/every-category7.png 1307w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>外面 → メニューの「タイトル属性」に指定した数字だけ表示されているのが分かると思います。<br />\nWordpressは、5件、JavaScriptは2件、CSSは1件。</p>\n<h2><span id=\"i-3\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>WordPressでカテゴリー毎の一覧を作る方法でした。管理画面から操作しやすくしてあげると自分だけでなく提供するクライアントにも親切だと思います。</p>\n<p><code>wp_get_nav_menu_items()</code>の関数を使えば外観 → メニューで設定した情報をすべて取得できます。今回のわたしのコード例では、<code>var_dump( $my_catelist );</code>の中身を見るといろいろと勉強になることがあるかもしれません（他になにか値を設定したくなったときとか）</p>\n<p>管理画面のメニューを使ったカテゴリーごとの一覧表示は、管理しやすくておすすめです。ぜひお試しください！</p>\n","date":"May 24, 2018","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"519a7720-1673-5c27-b060-50b6de17cac7"}}}