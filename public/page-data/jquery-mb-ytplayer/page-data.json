{"componentChunkName":"component---src-templates-post-js","path":"/jquery-mb-ytplayer/","result":{"data":{"wordpressPost":{"id":"f790cf95-8128-54c3-afd5-416b4f6f6331","title":"YouTube動画の背景再生を設定できるjQueryプラグイン「jquery.mb.YTPlayer」","slug":"jquery-mb-ytplayer","content":"<p>WebサイトでYouTube動画の背景再生を設定できるjQueryプラグイン「jquery.mb.YTPlayer」の紹介です。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">Youtubeを背景動画として再生してみよう！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#jquerymbYTPlayer\"><span class=\"toc_number toc_depth_1\">1</span> 「jquery.mb.YTPlayer」のダウンロード</a></li><li><a href=\"#jquerymbYTPlayer-2\"><span class=\"toc_number toc_depth_1\">2</span> 「jquery.mb.YTPlayer」の使い方</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">2.1</span> ロード中の処理</a></li></ul></li><li><a href=\"#JavaScript\"><span class=\"toc_number toc_depth_1\">3</span> JavaScriptから操作</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">4</span> おわり</a></li></ul></div>\n<h2><span id=\"jquerymbYTPlayer\">「jquery.mb.YTPlayer」のダウンロード</span></h2>\n<p>GitHubで管理されています。<br />\n→ <a href=\"https://github.com/pupunzi/jquery.mb.YTPlayer\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/pupunzi/jquery.mb.YTPlayer</a></p>\n<p>右上の「Download ZIP」からダウンロードしていきます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/07/ytplayer.png\" alt=\"\" class=\"alignnone size-full wp-image-7561\" width=\"375\" /></p>\n<p>使用するのは<span class=\"folder\">dist</span>内の<span class=\"filename\">jquery.mb.YTPlayer.min.js</span>だけです。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/07/ytplayer2.png\" alt=\"\" class=\"alignnone size-full wp-image-7563\" /></p>\n<p>このファイルをご自身の環境に移動して読みこんでおいてください。<br />\n※ jQueryも必須です。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"js/jquery.mb.YTPlayer.min.js\"&gt;&lt;/script&gt;\r\n</code></pre>\n<h2><span id=\"jquerymbYTPlayer-2\">「jquery.mb.YTPlayer」の使い方</span></h2>\n<p>Youtubeを表示させたい要素に対して<code>data-property</code>の中にプロパティを指定していきます。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"html\">&lt;div id=\"youtube-wrap\"&gt;\r\n\t&lt;div id=\"youtube\" data-property=\"{\r\n\t\t\tvideoURL: 'https://youtu.be/Dxd8MJxi5x4',\r\n\t\t\tcontainment: '#youtube-wrap',\r\n\t\t\tautoPlay: true,\r\n\t\t\tloop: 1,\r\n\t\t\tmute: true,\r\n\t\t\tstartAt: 0,\r\n\t\t\topacity: 1,\r\n\t\t\tshowControls: false,\r\n\t\t\tshowYTLogo: false\r\n\t}\"&gt;&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\n<table class=\"table\">\n<tr>\n<th width=\"200\">videoURL</th>\n<td>再生するYoutubeのID。URLでもOK。</td>\n</tr>\n<tr>\n<th>containment</th>\n<td>Youtubeを再生させる（埋め込ませる？）要素をbodyにするか否か。</td>\n</tr>\n<tr>\n<th>autoPlay</th>\n<td>自動再生させるか</td>\n</tr>\n<tr>\n<th>loop</th>\n<td>ループ再生させるか</td>\n</tr>\n<tr>\n<th>mute</th>\n<td>ミュートにするか</td>\n</tr>\n<tr>\n<th>startAt</th>\n<td>動画の再生位置</td>\n</tr>\n<tr>\n<th>opacity</th>\n<td>透過度合い（薄くできます）</td>\n</tr>\n<tr>\n<th>showControls</th>\n<td>再生、停止などのインタフェースを出すかどうか</td>\n</tr>\n<tr>\n<th>showYTLogo</th>\n<td>Youtubeロゴやリンクを表示するかどうか</td>\n</tr>\n</table>\n<p>いきなり音が出るとビックリするので、<code>mute: true</code>だけは必須だと思います。</p>\n<p>その他にもたくさんのプロパティがあります。「jquery.mb.YTPlayer」を使う際は覗いてみてください。<br />\n→ <a href=\"https://github.com/pupunzi/jquery.mb.YTPlayer/wiki#data-property\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/pupunzi/jquery.mb.YTPlayer/wiki#data-property</a></p>\n<p>HTML側でほとんどを指定するのでJavaScript側はとてもシンプルです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"js\">$('#youtube').YTPlayer();\r\n</code></pre>\n<p>Youtubeを囲っている親要素に高さや幅がないと表示されません。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"css\">#youtube-wrap {\r\n\tposition: relative;\r\n\theight: 100vh;\r\n\twidth: 100%;\r\n}</code></pre>\n<h3><span id=\"i\">ロード中の処理</span></h3>\n<p>Youtubeは動画を読み込むまでにタイムラグがあります。その間は「ロード中」など何かしらの処理が動いていた方が親切ですよね。</p>\n<p>「jquery.mb.YTPlayer」では、ロード完了を受け取るプロパティがあります。そのプロパティと組み合わせて、ロード中はローディングアイコンを出しておくという処理をしてみましょう。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"html\">&lt;div id=\"youtube-wrap\"&gt;\r\n\t&lt;div id=\"youtube\" data-property=\"{\r\n\t\tvideoURL: 'https://youtu.be/Dxd8MJxi5x4',\r\n\t\tcontainment: '#youtube-wrap',\r\n\t\tautoPlay: true,\r\n\t\tloop: 1,\r\n\t\tmute: true,\r\n\t\tstartAt: 0,\r\n\t\topacity: 1,\r\n\t\tshowControls: false,\r\n\t\tshowYTLogo: false,\r\n\t\tonReady: function( player ) {\r\n\t\t\t$('.loading').hide('slow');\r\n\t\t}\r\n\t}\"&gt;&lt;/div&gt;\r\n\t&lt;div class=\"loading\"&gt;Loading...&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-5\">コピー</span><code id=\"code-5\" class=\"css\">.loading {\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n\tz-index: 2;\r\n}</code></pre>\n<p><code>onReady</code>がロード終了時を検知しています。<code>$('.loading').hide('slow');</code>を呼び出すことで、それまで表示されていたローディングアイコンが消えるといった仕組みですね。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/07/ytplayer2.gif\" alt=\"\" class=\"alignnone size-medium wp-image-7584\" /></p>\n<h2><span id=\"JavaScript\">JavaScriptから操作</span></h2>\n<p>動的にたくさんの操作ができるようになっています。<br />\n→ <a href=\"https://github.com/pupunzi/jquery.mb.YTPlayer/wiki#external-methods\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/pupunzi/jquery.mb.YTPlayer/wiki#external-methods</a></p>\n<p>停止、再生、画面サイズ、ボリュームなど。</p>\n<p>ボリュームは最初はミュートにしておき、訪問したユーザーがオンにできる仕組みにしておくと親切かもしれません。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/07/ytplayer.gif\" alt=\"\" class=\"alignnone size-full wp-image-7572\" /><br />\n具体的なコードとしては、以下のような感じです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-6\">コピー</span><code id=\"code-6\" class=\"js\">/* ボリューム */\r\n$('.youtube_valume').on('click', function() {\r\n\t$('#youtube').YTPToggleVolume();\r\n\t$(this).toggleClass('active');\r\n});</code></pre>\n<h2><span id=\"i-2\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>Youtube動画を背景表示させる方法でした！</p>\n<p>ドキュメントは英語なので難しいと感じるかもしれませんが、日本語翻訳など見て導入してみてください。<br />\n→ <a href=\"https://github.com/pupunzi/jquery.mb.YTPlayer/wiki\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/pupunzi/jquery.mb.YTPlayer/wiki</a></p>\n","date":"July 26, 2018","categories":[{"name":"JavaScript","slug":"javascript"}],"tags":[{"name":"jQueryライブラリ","slug":"jquery"}],"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f790cf95-8128-54c3-afd5-416b4f6f6331"}}}