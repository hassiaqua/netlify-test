{"componentChunkName":"component---src-templates-post-js","path":"/header-fixed/","result":{"data":{"wordpressPost":{"id":"d2d87d26-74f4-533f-8883-1e28f45342a5","title":"途中からヘッダー固定にする方法！画面上部までスクロールされたら固定する","slug":"header-fixed","content":"<p>途中からヘッダー固定にする方法の紹介です。</p>\n<p>スクロールしてグローバルメニューが画面の上部に達した時に固定するという動きを実装していきます。</p>\n<p>実際の動きとしてはこんな感じです。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/header-fixed.gif\" alt=\"\" class=\"alignnone size-medium wp-image-14590\" /></p>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> 途中からヘッダー固定にする方法</a><ul><li><a href=\"#HTML\"><span class=\"toc_number toc_depth_2\">1.1</span> HTML</a></li><li><a href=\"#CSS\"><span class=\"toc_number toc_depth_2\">1.2</span> CSS</a></li><li><a href=\"#JavaScript\"><span class=\"toc_number toc_depth_2\">1.3</span> JavaScript</a></li></ul></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> 好きなタイミングで固定させる方法</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">3</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">途中からヘッダー固定にする方法</span></h2>\n<h3><span id=\"HTML\">HTML</span></h3>\n<p>ヘッダーメニューの作り方です。5つのメニューが並ぶシンプルな構成です。JavaScriptと連動させる大事な部分としては、<code>#global-nav</code>になります。<br />\n（ここだけは確実に合わせる）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;!-- global-nav --&gt;\r\n&lt;nav id=\"global-nav\"&gt;\r\n&lt;div class=\"inner\"&gt;\r\n&lt;ul class=\"global-list\"&gt;\r\n\t&lt;li class=\"global-item\"&gt;&lt;a href=\"#section1\"&gt;セクション１&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;li class=\"global-item\"&gt;&lt;a href=\"#section2\"&gt;セクション２&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;li class=\"global-item\"&gt;&lt;a href=\"#section3\"&gt;セクション３&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;li class=\"global-item\"&gt;&lt;a href=\"#section4\"&gt;セクション４&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;li class=\"global-item\"&gt;&lt;a href=\"#section5\"&gt;セクション５&lt;/a&gt;&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;/div&gt;&lt;!-- /global-list --&gt;\r\n&lt;/nav&gt;&lt;!-- /global-nav --&gt;</code></pre>\n<h3><span id=\"CSS\">CSS</span></h3>\n<p>CSSについては好きなように作ってもらえたらいいのですが、サンプルとして冒頭の動画のようなCSSを掲載しておきます。</p>\n<p>大事な部分としては、<code>.m_fixed</code>の部分で、グローバルメニューが画面上に達したら<code>.m_fixed</code>を付与するという処理をJavaScriptで実装するので、<code>.m_fixed</code>が付与された時に固定させるという処理をCSSで用意してあげてください。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"css\">#global-nav {\r\n\tbackground: #fff;\r\n\tborder-bottom: 1px solid #16244e;\r\n\tborder-top: 1px solid #16244e;\r\n\twidth: 100%;\r\n}\r\n\r\n#global-nav.m_fixed {\r\n\tleft: 0;\r\n\tposition: fixed;\r\n\ttop: 0;\r\n}\r\n\r\n#global-nav .inner {\r\n\tpadding-bottom: 0;\r\n\tpadding-top: 0;\r\n\tmargin: 0 auto;\r\n  max-width: 100%;\r\n  padding: 80px 0;\r\n  width: 768px;\r\n}\r\n\r\n.global-list {\r\n\tdisplay: flex;\r\n\tlist-style: none;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n}\r\n\r\n.global-item {\r\n\tborder-left: 1px solid #fff;\r\n\twidth: 20%;\r\n}\r\n\r\n.global-item:last-child {\r\n\tborder-right: 1px solid #fff;\r\n\tmargin-right: 0;\r\n}\r\n\r\n.global-item a {\r\n\tbackground: #16244e;\r\n\tcolor: #fff;\r\n\tdisplay: block;\r\n\tline-height: 50px;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n}</code></pre>\n<h3><span id=\"JavaScript\">JavaScript</span></h3>\n<p>最初にグローバルメニュー（<code>#global-nav</code>）の位置と高さを取得します。そして、スクロールのイベントでスクロール位置とグローバルメニューの位置を比較しつつ、超えたら<code>.m_fixed</code>を付与するという処理を行っています。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"js\">var navPos = jQuery( '#global-nav' ).offset().top; // グローバルメニューの位置\r\nvar navHeight = jQuery( '#global-nav' ).outerHeight(); // グローバルメニューの高さ\r\njQuery( window ).on( 'scroll', function() {\r\n\tif ( jQuery( this ).scrollTop() &gt; navPos ) {\r\n\t\tjQuery( 'body' ).css( 'padding-top', navHeight );\r\n\t\tjQuery( '#global-nav' ).addClass( 'm_fixed' );\r\n\t} else {\r\n\t\tjQuery( 'body' ).css( 'padding-top', 0 );\r\n\t\tjQuery( '#global-nav' ).removeClass( 'm_fixed' );\r\n\t}\r\n});</code></pre>\n<h2><span id=\"i-2\">好きなタイミングで固定させる方法</span></h2>\n<p>ピッタリ上部に固定する方法を紹介しましたが、好きなタイミングで固定させる方法もあります。方法は簡単でグローバルメニューの位置ではなく、好きなスクロール位置の固定値を指定してあげればOKです。</p>\n<p>具体的には以下のように、スクロール位置は判定する値を<code>1000</code>のように固定値にしてあげるだけです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"js\">jQuery( window ).on( 'scroll', function() {\r\n\tif ( 1000 &lt; jQuery( this ).scrollTop() ) { // 1000px以上スクロールしたら\r\n\t\tjQuery( '#global-nav' ).addClass( 'm_fixed' );\r\n\t} else {\r\n\t\tjQuery( '#global-nav' ).removeClass( 'm_fixed' );\r\n\t}\r\n});</code></pre>\n<p>ちなみに、一度消えたので上から降りてきてる風な見栄えにしたい場合は、<code>transition</code>を指定して<code>top</code>の値を調整すればいい感じになるかと思います。</p>\n<p>追加箇所だけ抜粋すると以下のような感じです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"css\">#global-nav {\r\n\tposition: static;\r\n\ttop: -30px;\r\n\ttransition: all 0.3s ease 0s;\r\n}\r\n\r\n#global-nav.m_fixed {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n}</code></pre>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2019/05/header-fixed2.gif\" alt=\"\" class=\"alignnone size-medium wp-image-14591\" /></p>\n<h2><span id=\"i-3\">おわり</span></h2>\n<p>途中からヘッダー固定にする方法でした。</p>\n<p>グローバルメニューが下部にあるパターンで使われたりするので、1つコードのストックして持っておくと安心です！</p>\n","date":"May 12, 2019","categories":[{"name":"CSS","slug":"css"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"d2d87d26-74f4-533f-8883-1e28f45342a5"}}}