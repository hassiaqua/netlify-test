{"componentChunkName":"component---src-templates-post-js","path":"/wordpress-https/","result":{"data":{"wordpressPost":{"id":"2b7d6ecc-7c83-5df6-a1ce-249bb400872d","title":"WordPressサイトをSSL（https化）する手順と確認ポイント","slug":"wordpress-https","content":"<p>WordPressサイトをhttps化する時の手順と、チェックポイントです。</p>\n<p>難しいと思われがちなhttps化ですが、<span class=\"font-l\">実は驚くほど簡単</span>です（しかも無料）。まだやっていない方は、ぜひ対応してみてください！</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">https化は意外と簡単！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#WordPressSSLhttps\"><span class=\"toc_number toc_depth_1\">1</span> WordPressサイトをSSL（https化）する手順</a><ul><li><a href=\"#XserverSSL\"><span class=\"toc_number toc_depth_2\">1.1</span> XserverでのSSL設定</a></li></ul></li><li><a href=\"#WordPresshttphttps\"><span class=\"toc_number toc_depth_1\">2</span> WordPressの内部リンクをhttpからhttpsに書き換える！</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">2.1</span> 投稿ページを書き換える</a></li><li><a href=\"#httphttps\"><span class=\"toc_number toc_depth_2\">2.2</span> テーマ内に直書きされたhttpをhttpsに書き換える</a></li><li><a href=\"#https\"><span class=\"toc_number toc_depth_2\">2.3</span> ウィジェットやメニューをhttpsに書き換える</a></li><li><a href=\"#URLhttps\"><span class=\"toc_number toc_depth_2\">2.4</span> 管理画面のサイトURLをhttpsに変更</a></li></ul></li><li><a href=\"#httphttps-2\"><span class=\"toc_number toc_depth_1\">3</span> httpへのアクセスをhttpsにリダイレクトさせる</a></li><li><a href=\"#SSLhttps\"><span class=\"toc_number toc_depth_1\">4</span> SSL（https化）した後の確認ポイント</a></li><li><a href=\"#httpsSearch_Console\"><span class=\"toc_number toc_depth_1\">5</span> httpsサイトをSearch Consoleに新しく登録</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">6</span> おわり</a></li></ul></div>\n<h2><span id=\"WordPressSSLhttps\">WordPressサイトをSSL（https化）する手順</span></h2>\n<p>今どきどこのサーバー会社でも<strong class=\"marker\">SSL（https化）する上での費用は0円</strong>です。ボタンをポチッとするだけ。わたしはXserverを使っているので、画面はXserverになりますが、「サーバー会社名 + SSL」などで調べて、ご自身のサーバー管理画面からポチポチしてください。</p>\n<h3><span id=\"XserverSSL\">XserverでのSSL設定</span></h3>\n<p>Xserverを例にすると、サーバーパネルから「SSL設定」<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https.png\" alt=\"\" class=\"alignnone size-full wp-image-8627\" /></p>\n<p>https化する対象ドメインを選択。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https2-700x401.png\" alt=\"\" class=\"alignnone size-medium wp-image-8628\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https2-700x401.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https2-768x440.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https2.png 1106w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>「独自SSL設定の追加」から「独自SSL設定を追加する（確定）」で追加の依頼が完了です。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https3-700x390.png\" alt=\"\" class=\"alignnone size-medium wp-image-8629\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https3-700x390.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https3-768x428.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https3.png 1125w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>依頼すると下記のようなメッセージが表示されます。</p>\n<blockquote><p>SSL新規取得申請中です。しばらくお待ちください。<br />\n※処理には数分程度かかる場合があります。</p></blockquote>\n<p>httpsの処理が完了したかどうかは、今のURLをhttpsに変更してアクセスしてみてください。まだの場合は、「安全ではありません」的なメッセージが全面に表示されます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https5-700x277.png\" alt=\"\" class=\"alignnone size-medium wp-image-8630\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https5-700x277.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https5-768x304.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https5.png 1048w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h4>各サーバー会社のSSL手順</h4>\n<p>Xserverを例にしましたが、他のサーバーでも無料で申請ができるはずです。主なサーバー会社のマニュアルへのリンクをまとめました。ご自身が契約しているサーバー会社の手順を参考に同様の対応を行ってください！</p>\n<table class=\"table\">\n<tr>\n<th width=\"120\">サーバー会社</th>\n<th>リンク</th>\n</tr>\n<tr>\n<td>ロリポップ</td>\n<td><a href=\"https://lolipop.jp/manual/user/ssl-free-order/\" rel=\"noopener\" target=\"_blank\">独自SSL（無料）のお申込み・設定方法 / セキュリティ / マニュアル &#8211; レンタルサーバーならロリポップ！</a></td>\n</tr>\n<tr>\n<td>Xserver</td>\n<td><a href=\"https://www.xserver.ne.jp/manual/man_server_ssl.php\" rel=\"noopener\" target=\"_blank\">無料独自SSL設定 | レンタルサーバー【エックスサーバー】</a></td>\n</tr>\n<tr>\n<td>さくらインターネット</td>\n<td><a href=\"https://help.sakura.ad.jp/hc/ja/articles/115000136822--%E7%84%A1%E6%96%99SSL-%E3%82%B5%E3%83%BC%E3%83%90%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB%E3%81%8B%E3%82%89%E3%81%AE%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86\" rel=\"noopener\" target=\"_blank\">【無料SSL】サーバコントロールパネルからの導入手順 – さくらのサポート情報</a></td>\n</tr>\n<tr>\n<td>バリューサーバー</td>\n<td><a href=\"https://www.value-server.com/startup/free_ssl.html\" rel=\"noopener\" target=\"_blank\">無料SSLの設定 &#8211; VALUE SERVER バリューサーバー</a></td>\n</tr>\n<tr>\n<td>mixhost</td>\n<td><a href=\"https://help.mixhost.jp/hc/ja/articles/115003741672-%E7%84%A1%E6%96%99%E7%8B%AC%E8%87%AASSL%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95\" rel=\"noopener\" target=\"_blank\">無料独自SSLのご利用方法 – mixhost ヘルプ＆サポート</a></td>\n</tr>\n<tr>\n<td>ヘテムル</td>\n<td><a href=\"https://heteml.jp/support/manual/d-ssl/\" rel=\"noopener\" target=\"_blank\">独自SSLオプション設定方法 &#8211; レンタルサーバー「heteml（ヘテムル）」</a></td>\n</tr>\n</table>\n<h2><span id=\"WordPresshttphttps\">WordPressの内部リンクをhttpからhttpsに書き換える！</span></h2>\n<p>サーバーでhttps申請してもhttps化対応したことにはなりません。現時点では、<strong class=\"marker\">httpsでもアクセスできる状態というだけ</strong>です。</p>\n<p>WordPressサイトにおいて書き換えるポイントは3つです。<br />\n※ 失敗しても元に戻せるように必ずバックアップを取得しておくことをおすすめします。<br />\n参考：<a href=\"https://haniwaman.com/all-in-one-wp-migration/\" rel=\"noopener\" target=\"_blank\">WordPressのバックアップは「All-in-One WP Migration」でDBもテーマもオールOK！！</a></p>\n<h3><span id=\"i\">投稿ページを書き換える</span></h3>\n<p>1つ目は投稿ページです。画像や内部リンクなど、たくさんのリンクがhttpの状態で保存されていると思います。これを1つ1つ目視で変更していってもいいのですが、たぶんめっちゃ時間がかかります。</p>\n<p>投稿ページ、固定ページを一括で置換してくれる「<a href=\"https://ja.wordpress.org/plugins/search-regex/\" rel=\"noopener\" target=\"_blank\">Search Regex</a>」がおすすめです。</p>\n<p>例えば、当ブログがまだhttp状態だったとすると、</p>\n<ul>\n<li>Source → Post Content</li>\n<li>Search pattern → http://haniwaman.com</li>\n<li>Replace pattern → https://haniwaman.com</li>\n</ul>\n<p>といった具合に、「http:// + ドメイン名」を「https:// + ドメイン名」に一括置換すろという処理を行えます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https6-700x220.png\" alt=\"\" class=\"alignnone size-medium wp-image-8632\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https6-700x220.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https6-768x241.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https6.png 988w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h3><span id=\"httphttps\">テーマ内に直書きされたhttpをhttpsに書き換える</span></h3>\n<p>テーマによっては、テーマファイル内に直接URLが直書きされているものもあったりします。こういうのも「Search Regex」と同様に置換していきましょう。</p>\n<p>また、haniwaman.comのドメインを例にすると、</p>\n<ol>\n<li>テーマファイルをダウンロード</li>\n<li>Sublime Textなどファイルをまたいで一括置換できるエディタで「http://haniwaman.com」を検索（ご自身のドメインに合わせて変更してください）</li>\n<li>http://haniwaman.com → https://haniwaman.comに置換</li>\n<li>置換後のテーマフィアルをアップロード</li>\n</ol>\n<p>のような感じになります。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https7.png\" alt=\"\" class=\"alignnone size-full wp-image-8634\" /></p>\n<h3><span id=\"https\">ウィジェットやメニューをhttpsに書き換える</span></h3>\n<p>WordPressのhttps化では、ここが一番面倒くさいです&#8230;。</p>\n<p>ウィジェットとか、メニューは「Search Regex」で置換対象にならないので、目視での変更となります。</p>\n<p>最低限で確認しておくべきは、以下の3点です。</p>\n<ul>\n<li>カスタマイザー</li>\n<li>ウィジェット</li>\n<li>メニュー</li>\n</ul>\n<p>目視で確認して内部リンクとなりうるURLがあれば、手動で変換していってください。</p>\n<h3><span id=\"URLhttps\">管理画面のサイトURLをhttpsに変更</span></h3>\n<p>最後に、管理画面からトップページのURLをhttpsに変更してあげます。</p>\n<p>設定 →　一般 から以下の2点を変更してあげます。<br />\nなお、<strong class=\"marker\">ここのURL記述を間違えたまま更新すると更新すると管理画面にログインできなくなりますので、十分にご注意ください。</strong>（データベースを直接編集する必要がでてきます&#8230;）</p>\n<ul>\n<li>WordPress アドレス (URL)</li>\n<li>サイトアドレス (URL)</li>\n</ul>\n<p>Before<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https8-700x163.png\" alt=\"\" class=\"alignnone size-medium wp-image-8638\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https8-700x163.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https8-768x179.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https8.png 903w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>After<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https9-700x162.png\" alt=\"\" class=\"alignnone size-medium wp-image-8639\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https9-700x162.png 700w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https9-768x178.png 768w, https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https9.png 891w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h2><span id=\"httphttps-2\">httpへのアクセスをhttpsにリダイレクトさせる</span></h2>\n<p>httpにアクセスされた際にhttpsへ強制的にリダイレクトさせる記述です。<br />\n<span class=\"filename\">.htaccess</span>の最初に以下の記述をそのままコピペしてください（wp-contentとかと同じ階層にあるファイルです。）<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https10.png\" alt=\"\" class=\"alignnone size-full wp-image-8641\" /></p>\n<pre><span class=\"filename\">.htaccess</span><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"\">&lt;IfModule mod_rewrite.c&gt;\r\nRewriteEngine on\r\nRewriteCond %{HTTPS} !=on [NC]\r\nRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]\r\n&lt;/IfModule&gt;</code></pre>\n<p>そのままですが、すべてのアクセスをhttpsのURLに301リダイレクトさせるという処理になります。301は恒久的な転送です。</p>\n<h2><span id=\"SSLhttps\">SSL（https化）した後の確認ポイント</span></h2>\n<p>SSL化したあとは、鍵マークが壊れていないか確認しましょう。</p>\n<p><strong class=\"marker\">内部リンクに1つでもhttpの状態のURLが含まれていると、ページ全体が「安全ではない」と理解</strong>されて、URL入力欄の鍵アイコンが壊れた状態になります。<br />\n※ アイコンの見栄えはブラウザによって異なります。以下の画像はFirefoxでの例です。（ただ、OKの場合はだいたい同じで緑の鍵アイコンになっているかと）</p>\n<p>OK<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https12.png\" alt=\"\" class=\"alignnone size-full wp-image-8643\" /></p>\n<p>NG<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https11.png\" alt=\"\" class=\"alignnone size-full wp-image-8644\" /></p>\n<p>もしOK状態の鍵アイコンでなければ、そのページに<strong class=\"marker\">httpへの内部リンクがないか血眼になって探しましょう！</strong></p>\n<h2><span id=\"httpsSearch_Console\">httpsサイトをSearch Consoleに新しく登録</span></h2>\n<p>Search Consoleにサイトを登録して管理している人も多いと思います。Search Consoleではhttpサイトとhttpsサイトは別物として認識されます。</p>\n<p>ですので、https化した際は新しく登録してあげてください。httpとhttpsの2つのサイトが存在することになります。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/09/wordpress-https13.png\" alt=\"\" class=\"alignnone size-full wp-image-8647\" /></p>\n<p>（httpサイトも削除せずに一応残しておきましょう。過去のデータ見たくなったときのために&#8230;）</p>\n<h2><span id=\"i-2\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>WordPressサイトをhttps化する流れと確認ポイントでした。</p>\n<ul>\n<li>サーバーでhttps化するのはボタン1つ押すだけ、</li>\n<li>WordPressでの対応はhttpをhttpsに置換するだけ</li>\n</ul>\n<p>というとても簡単な流れで行なえます。</p>\n<p>GoolgeがhttpsであることをSEOにおける1つの指標としている以上は、対応しておいた方がいいことは間違いありません。<br />\n無料でかつ置換するだけ行えるので、まだ対応していない方はぜひWordPresサイトのhttps化に取組んでみてください！</p>\n","date":"September 20, 2018","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"2b7d6ecc-7c83-5df6-a1ce-249bb400872d"}}}