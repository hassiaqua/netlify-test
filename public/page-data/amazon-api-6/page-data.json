{"componentChunkName":"component---src-templates-post-js","path":"/amazon-api-6/","result":{"data":{"wordpressPost":{"id":"94cc472c-f4e2-5c5e-95e2-78fa48bf6672","title":"「Amazon API」の使い方⑥－パラメーターの種類とか編－","slug":"amazon-api-6","content":"<div class=\"box box-link\">\n※ 本エントリーは、PA-API4.0時点のものとなります。<strong class=\"marker\">2019年12月1日から新しいバージョン5.0のPA-API（Product Advertising API）と移行</strong>するため、これからPA-APIをご利用の方は、以下のv5.0の記事をご参考ください。</p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"OeB04Xb5gD\"><p><a href=\"https://haniwaman.com/pa-api-5/\">4.0から大きく変わった「PA-API v5.0」の使い方！</a></p></blockquote>\n<p><iframe title=\"&#8220;4.0から大きく変わった「PA-API v5.0」の使い方！&#8221; &#8212; HPcode\" class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"https://haniwaman.com/pa-api-5/embed/#?secret=OeB04Xb5gD\" data-secret=\"OeB04Xb5gD\" width=\"500\" height=\"282\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n</div>\n<p>前回で、リクエストURLの結果を表示させることができるようになりました。<br />\n（→ <a href=\"https://haniwaman.com/amazon-api-5/\">「Amazon API」の使い方⑤－リクエスト結果（XML）の表示編－</a>）</p>\n<p>Amazon APIの使い方としては、ほぼほぼ終わりでもいいんですが、欲しい情報を取ってこれるように、リクエストURLに付けるパラメーターについて簡単に説明しておきます。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">Amazonサーバーにリクエストできる項目を簡単にまとめました！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#URL\"><span class=\"toc_number toc_depth_1\">1</span> リクエストURLのおさらい</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">2</span> 絶対に必要なパラメーター</a><ul><li><a href=\"#Service\"><span class=\"toc_number toc_depth_2\">2.1</span> Service</a></li><li><a href=\"#AWSAccessKeyId\"><span class=\"toc_number toc_depth_2\">2.2</span> AWSAccessKeyId</a></li><li><a href=\"#AssociateTag\"><span class=\"toc_number toc_depth_2\">2.3</span> AssociateTag</a></li><li><a href=\"#Operation\"><span class=\"toc_number toc_depth_2\">2.4</span> Operation</a></li><li><a href=\"#Timestamp\"><span class=\"toc_number toc_depth_2\">2.5</span> Timestamp</a></li><li><a href=\"#Signature\"><span class=\"toc_number toc_depth_2\">2.6</span> Signature</a></li><li><a href=\"#URL-2\"><span class=\"toc_number toc_depth_2\">2.7</span> 必須のパラメータをつなげたリクエストURL例</a></li></ul></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">3</span> 必須じゃないけど、だいたい付けているパラメーター</a><ul><li><a href=\"#Version\"><span class=\"toc_number toc_depth_2\">3.1</span> Version</a></li><li><a href=\"#ResponseGroup\"><span class=\"toc_number toc_depth_2\">3.2</span> ResponseGroup</a></li></ul></li><li><a href=\"#OperationItemSearch\"><span class=\"toc_number toc_depth_1\">4</span> 「Operation=ItemSearch」関連パラメーター</a><ul><li><a href=\"#SearchIndex\"><span class=\"toc_number toc_depth_2\">4.1</span> SearchIndex</a></li><li><a href=\"#Keywords\"><span class=\"toc_number toc_depth_2\">4.2</span> Keywords</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_2\">4.3</span> その他のパラメーター</a></li></ul></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_1\">5</span> おわり</a></li></ul></div>\n<h2><span id=\"URL\">リクエストURLのおさらい</span></h2>\n<p>リクエストURLの簡単なおさらいですが、</p>\n<p><strong>[URL]?[パラメーター1]=値&amp;[パラメーター2]=値&amp;[パラメーター3]=値・・・（いくつでも）</strong></p>\n<p>こういうやつですね。</p>\n<p>元となるリクエストURLがあって、それにパラメーターを付けてAmazonに情報をリクエストするわけです。</p>\n<p>パラメーターの設定の仕方で、Amazonから受け取れるデータが変わってきます。</p>\n<p>もうちょっと詳しくは第3回を見てください。<br />\n⇒<a href=\"https://haniwaman.com/amazon-api-3/\">「Amazon API」の使い方を紹介③－リクエストURL作成の概要－</a></p>\n<p>今回は、そのパラメーターの種類とか設定値を説明していきます。</p>\n<h2><span id=\"i\">絶対に必要なパラメーター</span></h2>\n<p>パラメーターには色々な種類があります。<br />\nまずは、必ず必要になるパラメーターから見ていきましょう！</p>\n<h3><span id=\"Service\">Service</span></h3>\n<p>何のサービスを使用するかを設定します。<br />\nとはいっても設定できる値は、「AWSECommerceService」の1つしかないみたいので、それを設定してあげましょう。</p>\n<p>【例】<br />\nService=AWSECommerceService</p>\n<h3><span id=\"AWSAccessKeyId\">AWSAccessKeyId</span></h3>\n<p>アクセスキーを設定します。<br />\n第2回で取得したやつですね。<br />\n⇒<a href=\"https://haniwaman.com/amazon-api-2/\">「Amazon API」の使い方を紹介②－アクセスキーとシークレットキーの取得－</a></p>\n<p>【例】<br />\nAWSAccessKeyId=[第2回で取得したアクセスキー（人によって異なる）]</p>\n<h3><span id=\"AssociateTag\">AssociateTag</span></h3>\n<p>アソシエイトIDを指定するパラメーターです。</p>\n<p>「AssociateTag」の取得方法については第1回を参考に！<br />\n⇒<a href=\"https://haniwaman.com/amazon-api-1/\">「Amazon API」の使い方を紹介①－アソシエイトID（タグ）登録編－</a></p>\n<p>【例】<br />\nAssociateTag=[第1回で取得したアソシエイトタグ]</p>\n<h3><span id=\"Operation\">Operation</span></h3>\n<p>Amazonには色々な機能（カートに追加とか、商品検索とか）がありますよね。<br />\nどの機能（操作）をさせるかを設定できます。</p>\n<p>基本的に使うのは、商品検索だと思います。<br />\n商品検索の値は、「ItemSearch」です。</p>\n<p>【例】<br />\nOperation=ItemSearch</p>\n<p>その他の「Operation」の値については、以下のサイトを参考に！</p>\n<blockquote><p>API Version 2009-07-01の場合</p>\n<table class=\"table\">\n<tbody>\n<tr>\n<th>パラメータ値</th>\n<th>実行内容</th>\n</tr>\n<tr>\n<td>BrowseNodeLookup</td>\n<td>BrowseNodeの情報。ブラウズノードとは商品が分類されているグループの階層構造</td>\n</tr>\n<tr>\n<td>CartAdd</td>\n<td>カートに商品追加</td>\n</tr>\n<tr>\n<td>CartClear</td>\n<td>カートをクリア</td>\n</tr>\n<tr>\n<td>CartCreate</td>\n<td>カートを作成</td>\n</tr>\n<tr>\n<td>CartGet</td>\n<td>カートを取得</td>\n</tr>\n<tr>\n<td>CartModify</td>\n<td>カート内の情報変更</td>\n</tr>\n<tr>\n<td>CustomerContentLookup</td>\n<td>顧客をID検索</td>\n</tr>\n<tr>\n<td>CustomerContentSearch</td>\n<td>顧客を検索</td>\n</tr>\n<tr>\n<td>Help</td>\n<td>HELPを表示</td>\n</tr>\n<tr>\n<td>ItemLookup</td>\n<td>ASINなどで商品を検索</td>\n</tr>\n<tr>\n<td>ItemSearch</td>\n<td>商品名や著者名でキーワード検索</td>\n</tr>\n<tr>\n<td>ListLookup</td>\n<td>リストマニア情報をID検索</td>\n</tr>\n<tr>\n<td>ListSearch</td>\n<td>リストマニア情報を検索</td>\n</tr>\n<tr>\n<td>SellerListingLookup</td>\n<td>特定の売り手の商品をID検索</td>\n</tr>\n<tr>\n<td>SellerListingSearch</td>\n<td>特定の売り手の商品検索</td>\n</tr>\n<tr>\n<td>SellerLookup</td>\n<td>売り手を検索</td>\n</tr>\n<tr>\n<td>SimilarityLookup</td>\n<td>関連商品の検索</td>\n</tr>\n<tr>\n<td>TagLookup</td>\n<td>US only</td>\n</tr>\n<tr>\n<td>TransactionLookup</td>\n<td>US only</td>\n</tr>\n<tr>\n<td>VehiclePartLookup</td>\n<td>US only</td>\n</tr>\n<tr>\n<td>VehiclePartSearch</td>\n<td>US only</td>\n</tr>\n<tr>\n<td>VehicleSearch</td>\n<td>US only</td>\n</tr>\n</tbody>\n</table>\n<p style=\"text-align: right;\"><a href=\"http://www.ajaxtower.jp/ecs/para/index5.html\" target=\"_blank\" rel=\"noopener\">オペレーション(Operation) &#8211; 共通パラメータ &#8211; Amazon Web サービス</a></p>\n</blockquote>\n<h3><span id=\"Timestamp\">Timestamp</span></h3>\n<p>認証用にタイムスタンプが必要です。<br />\nタイムスタンプの作り方が書かれたコードは、<br />\n第4回で説明してますので、参考にしてください。<br />\n⇒<a href=\"https://haniwaman.com/amazon-api-4/\">「Amazon API」の使い方を紹介④－リクエストURLの作成（PHP）と結果（XML）の確認－</a></p>\n<p>【例】<br />\nTimestamp=2014-09-11T02:05:49Z</p>\n<h3><span id=\"Signature\">Signature</span></h3>\n<p>こちらも認証用に必要なパラメーターです。<br />\n（わたしにとっては）複雑な変換を行いなって作成していきます。</p>\n<p>「Signature」の作り方も<br />\n第4回で説明しているので参照にしてください。<br />\n⇒<a href=\"https://haniwaman.com/amazon-api-4/\">「Amazon API」の使い方を紹介④－リクエストURLの作成（PHP）と結果（XML）の確認－</a></p>\n<p>【例】<br />\nSignature=[エンコード等、変換して作られた値]</p>\n<h3><span id=\"URL-2\">必須のパラメータをつなげたリクエストURL例</span></h3>\n<p>ベースとなるURLを頭に付けて、各パラメーターを「&amp;」でつなげていきましたよね。</p>\n<p>http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&#038;AWSAccessKeyId=[第2回で取得したアクセスキー（人によって異なる）]&#038;Operation=ItemSearch&#038;Timestamp=2014-09-11T02:05:49Z&#038;Signature=[エンコード等、変換して作られた値]</p>\n<p>といった感じです。</p>\n<h2><span id=\"i-2\">必須じゃないけど、だいたい付けているパラメーター</span></h2>\n<p>必須ではないけど、だいたい付けているパラメーターを紹介していきます。</p>\n<h3><span id=\"Version\">Version</span></h3>\n<p>Amazon APIのバージョンです。<br />\n最新バージョンは、「2013-08-01」ですかね。（2014年9月11日現在）</p>\n<p>APIのバージョンによって使えるパラメーターが変わってくるので、<br />\n指定しておいたほうがよいかと思います。</p>\n<p>【例】<br />\nVersion=2013-08-01</p>\n<h3><span id=\"ResponseGroup\">ResponseGroup</span></h3>\n<p>Amazonからどういった結果を返してもらうかを指定するパラメーターです。<br />\n価格が欲しいとか、画像が欲しいとか、複数のパラメーター値を設定できます。</p>\n<p>また、「Operation」パラメーターと紐づいていて、<br />\n「Operation」の値によって「ResponseGroup」に設定できるかが変わってきます。</p>\n<p>今回はよく使う「Operation=ItemSearch」の「ResponseGroup」について見ていきましょう。<br />\n（その他のやつを知らないだけですが・・・。）</p>\n<p>さらにその中でもよく使うであろう値について確認していきます。</p>\n<h4>Small</h4>\n<p>名前の通り、少ない（最小限）の情報だけを結果として返してくれます。<br />\nタイトルとかリンクなど、ホント最小限です。</p>\n<p>【例】<br />\nResponseGroup=Small</p>\n<h4>Medium</h4>\n<p>上の「Small」よりもう少し多くの情報を加えて返してくれます。<br />\n画像とか価格とかの情報も含んでくれます。<br />\nわたしは、「Medium」くらいの情報があれば、満足です。</p>\n<p>【例】<br />\nResponseGroup=Medium</p>\n<h4>Large</h4>\n<p>「Small」「Medium」と来たら当然「Large」もあります。<br />\n「Medium」の情報に加えて、レビューとか、関連情報なんかも返してくれるみたいです。</p>\n<p>何が必要か分からないから全部もらっちゃえっていうのもありですが、<br />\n情報が多いとそれだけ重くなることも忘れないでください。</p>\n<p>【例】<br />\nResponseGroup=Large</p>\n<h4>その他の値</h4>\n<p>「Small」「Medium」「Large」以外にも個別にたくさんの値があります。<br />\n他の値を知りたい場合は、以下のサイトを参考にしてください。<br />\n⇒<a href=\"http://www.ajaxtower.jp/ecs/responsegroup/\" target=\"_blank\" rel=\"noopener\">取得する情報の種類(ResponseGroup) &#8211; Amazon Web サービス</a></p>\n<p>わたしは、「Small」「Medium」「Large」のどれか使って、その中から抜き出す感じで作ってます。<br />\n（ただの面倒くさがり・・・。）</p>\n<h4>複数の値を組み合わせる</h4>\n<p>「ResponseGroup」のパラメーターは複数の値を組み合わせて持つことができます。<br />\n状況に合わせて色々設定しましょう。</p>\n<p>【例】<br />\nResponseGroup=Images,Reviews,SalesRank</p>\n<h2><span id=\"OperationItemSearch\">「Operation=ItemSearch」関連パラメーター</span></h2>\n<p>商品検索結果を受け取るにあたって、いろんなパラメーターを追加することができます。</p>\n<ul>\n<li>特定のカテゴリーを指定して検索、</li>\n<li>キーワードで検索、</li>\n<li>タイトルから検索、</li>\n<li>著者名から検索</li>\n</ul>\n<p>など様々です。</p>\n<h3><span id=\"SearchIndex\">SearchIndex</span></h3>\n<p>検索の対象とするカテゴリーを指定できます。</p>\n<p>各カテゴリーの値について、以下のサイトを参考にしてください。</p>\n<blockquote>\n<table class=\"table\">\n<tbody>\n<tr>\n<th>指定する値</th>\n<th>カテゴリー</th>\n</tr>\n<tr>\n<td>All</td>\n<td>全て</td>\n</tr>\n<tr>\n<td>Apparel</td>\n<td>アパレル</td>\n</tr>\n<tr>\n<td>Baby</td>\n<td>ベビー＆マタニティ</td>\n</tr>\n<tr>\n<td>Beauty</td>\n<td>コスメ</td>\n</tr>\n<tr>\n<td>Blended</td>\n<td>全て</td>\n</tr>\n<tr>\n<td>Books</td>\n<td>本(和書)</td>\n</tr>\n<tr>\n<td>Classical</td>\n<td>クラシック音楽</td>\n</tr>\n<tr>\n<td>DVD</td>\n<td>DVD</td>\n</tr>\n<tr>\n<td>Electronics</td>\n<td>エレクトロニクス</td>\n</tr>\n<tr>\n<td>ForeignBooks</td>\n<td>洋書</td>\n</tr>\n<tr>\n<td>Grocery</td>\n<td>食品</td>\n</tr>\n<tr>\n<td>HealthPersonalCare</td>\n<td>ヘルスケア</td>\n</tr>\n<tr>\n<td>Hobbies</td>\n<td>ホビー</td>\n</tr>\n<tr>\n<td>Jewelry</td>\n<td>ジュエリー</td>\n</tr>\n<tr>\n<td>Kitchen</td>\n<td>ホーム＆キッチン</td>\n</tr>\n<tr>\n<td>Music</td>\n<td>ミュージック</td>\n</tr>\n<tr>\n<td>MusicTracks</td>\n<td>曲名</td>\n</tr>\n<tr>\n<td>Software</td>\n<td>ソフトウェア</td>\n</tr>\n<tr>\n<td>SportingGoods</td>\n<td>スポーツ＆アウトドア</td>\n</tr>\n<tr>\n<td>Toys</td>\n<td>おもちゃ</td>\n</tr>\n<tr>\n<td>VHS</td>\n<td>VHS</td>\n</tr>\n<tr>\n<td>Video</td>\n<td>ビデオ</td>\n</tr>\n<tr>\n<td>VideoGames</td>\n<td>ゲーム</td>\n</tr>\n<tr>\n<td>Watches</td>\n<td>時計</td>\n</tr>\n</tbody>\n</table>\n<p style=\"text-align: right;\"><a href=\"http://www.ajaxtower.jp/ecs/itemsearch/index2.html\" target=\"_blank\" rel=\"noopener\">商品カテゴリーの指定(SearchIndex) &#8211; 商品検索(ItemSearch) &#8211; Amazon Web サービス</a></p>\n</blockquote>\n<p>【例】<br />\nSearchIndex=All とか<br />\nSearchIndex=DVD</p>\n<h3><span id=\"Keywords\">Keywords</span></h3>\n<p>商品を検索するときのキーワードを設定できます。<br />\nわたしの例では「アナと雪の女王」でしたね。</p>\n<p>【例】<br />\nKeywords=[好きな検索キーワード]</p>\n<h3><span id=\"i-3\">その他のパラメーター</span></h3>\n<p>基本的に商品検索で使うのは「SearchIndex」「Keywords」の2種類です。<br />\nその他にもパラメーターがありますが、利用頻度は低いと思うので説明は割愛します。</p>\n<p><h2><span id=\"i-4\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome --><br />\nざーっとですが、リクエストURLのパラメーターについて紹介していきました。</p>\n<p>今回紹介したパラメーターを使えば、ある程度のサービスは作れるんじゃないかなと思います。<br />\n価格のデータを取得して安い順に並べ替えたり、<br />\n画像のデータを取得して見栄えを良くしたり、などなど。</p>\n<p>実際に色々と試してみてください。</p>\n<p>次回は最終回として、実際に簡単なサービスを作ってみましょう！</p>\n<div class=\"box box-link\">\n※ 以下エントリーは、PA-API4.0時点のものとなります。<strong class=\"marker\">2019年12月1日から新しいバージョン5.0のPA-API（Product Advertising API）と移行</strong>するため、これからPA-APIをご利用の方は、以下のv5.0の記事をご参考ください。</p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"OeB04Xb5gD\"><p><a href=\"https://haniwaman.com/pa-api-5/\">4.0から大きく変わった「PA-API v5.0」の使い方！</a></p></blockquote>\n<p><iframe title=\"&#8220;4.0から大きく変わった「PA-API v5.0」の使い方！&#8221; &#8212; HPcode\" class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"https://haniwaman.com/pa-api-5/embed/#?secret=OeB04Xb5gD\" data-secret=\"OeB04Xb5gD\" width=\"500\" height=\"282\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n</div>\n<p>第1回：<a href=\"https://haniwaman.com/amazon-api-1/\">アソシエイトタグの取得</a><br />\n第2回：<a href=\"https://haniwaman.com/amazon-api-2/\">アクセスキーとシークレットキーの取得</a><br />\n第3回：<a href=\"https://haniwaman.com/amazon-api-3/\">リクエストURL作成の概要</a><br />\n第4回：<a href=\"https://haniwaman.com/amazon-api-4/\">リクエストURLの作成（PHP）と結果（XML）の確認</a><br />\n第5回：<a href=\"https://haniwaman.com/amazon-api-5/\">リクエスト結果（XML）の表示</a><br />\n第6回：<a href=\"https://haniwaman.com/amazon-api-6/\">パラメーターの種類とか</a><br />\n最終回：<a href=\"https://haniwaman.com/amazon-api-7/\">実際に作ってみよう</a></p>\n","date":"December 24, 2017","categories":[{"name":"Web API","slug":"web-api"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"94cc472c-f4e2-5c5e-95e2-78fa48bf6672"}}}