{"componentChunkName":"component---src-templates-post-js","path":"/is-in/","result":{"data":{"wordpressPost":{"id":"fc932bf8-68d8-5407-8389-3ef3a13ee005","title":"スクロールが特定のエリアに入ったかどうかを検知するjQuery","slug":"is-in","content":"<p><strong class=\"marker\">スクロール時に特定のエリアに入ったかどうかを検知する</strong>ためのjQueryの書き方です。</p>\n<p>背景色とのコントラスト比で色を追従するアイテムの色を変更したい場合や、特定のエリアのみ表示するようなアイテムを作る際に使われたりします。</p>\n<p>型だけ覚えておけば使い回せて便利なので、ぜひお試しください！</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">スクロールや要素の値の取り方が整理できていれば簡単です。</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#jQuery\"><span class=\"toc_number toc_depth_1\">1</span> スクロールが特定のエリアに入ったかどうかを検知するjQuery</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">1.1</span> 特定のエリアに入った時にアイテムを表示する例</a></li></ul></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> おわり</a></li></ul></div>\n<h2><span id=\"jQuery\">スクロールが特定のエリアに入ったかどうかを検知するjQuery</span></h2>\n<p>以下のような、スクロールがセクション3に入った時にヘッダーの色が赤に変わる例を作ってみました。<br />\n<video src=\"https://haniwaman.com/wp-content/uploads/2019/12/is-in.mov\" controls autoplay loop></video></p>\n<p>HTMLとしては、以下のようなものを用意しました。<br />\n対象となるエリアに対して<code>.target-area</code>を指定してあげます。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;div class=\"section section1\"&gt;\r\n\t&lt;div class=\"section-content\"&gt;セクション1&lt;/div&gt;&lt;!-- /section-content --&gt;\r\n&lt;/div&gt;&lt;!-- /section --&gt;\r\n&lt;div class=\"section section2\"&gt;\r\n\t&lt;div class=\"section-content\"&gt;セクション2&lt;/div&gt;&lt;!-- /section-content --&gt;\r\n&lt;/div&gt;&lt;!-- /section --&gt;\r\n&lt;div class=\"section section3 target-area\"&gt;\r\n\t&lt;div class=\"section-content\"&gt;セクション3&lt;/div&gt;&lt;!-- /section-content --&gt;\r\n&lt;/div&gt;&lt;!-- /section --&gt;\r\n&lt;div class=\"section section4\"&gt;\r\n\t&lt;div class=\"section-content\"&gt;セクション4&lt;/div&gt;&lt;!-- /section-content --&gt;\r\n&lt;/div&gt;&lt;!-- /section --&gt;\r\n&lt;div class=\"section section5\"&gt;\r\n\t&lt;div class=\"section-content\"&gt;セクション5&lt;/div&gt;&lt;!-- /section-content --&gt;\r\n&lt;/div&gt;&lt;!-- /section --&gt;</code></pre>\n<p>CSSでは、各セクションに対して適当な色と高さを指定してあげています。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"css\">.section {\r\n\theight: 600px;\r\n\tbackground: #ccc;\r\n\tposition: relative;\r\n\ttransition: all 0.3s ease 0s;\r\n}\r\n.section1 {\r\n\tbackground: #FFFDE7;\r\n}\r\n.section2 {\r\n\tbackground: #E1F5FE;\r\n}\r\n.section3 {\r\n\tbackground: #BBDEFB;\r\n}\r\n.section4 {\r\n\tbackground: #C8E6C9;\r\n}\r\n.section5 {\r\n\tbackground: #FFECB3;\r\n}</code></pre>\n<p>そして、jQueryでスクロールイベントを取得して判定を行っています。<span id=\"jquery\"></span></p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"js\">jQuery(window).scroll(function() {\r\n\tlet scrollTop = jQuery(window).scrollTop(); // スクロール上部の位置\r\n\tlet areaTop = jQuery(\".target-area\").offset().top; // 対象エリアの上部の位置\r\n\tlet areaBottom = areaTop + jQuery(\".target-area\").innerHeight(); // 対象エリアの下部の位置\r\n\r\n\tif (scrollTop &gt; areaTop &amp;&amp; scrollTop &lt; areaBottom) {\r\n\t\tjQuery(\"body\").addClass(\"is-in\"); // スクロールが対象エリアに入った場合\r\n\t} else {\r\n\t\tjQuery(\"body\").removeClass(\"is-in\"); // スクロールが対象エリアから出ている場合\r\n\t}\r\n});</code></pre>\n<p>取得する値としては以下の3つです。</p>\n<ul class=\"check\">\n<li>スクロール上部の位置を取得</li>\n<li>対象エリアの上部の位置</li>\n<li>対象エリアの下部の位置</li>\n</ul>\n<p>そして、<strong>スクロール上部が対象エリアの上部の位置を超えた時</strong>と、<strong>スクロール上部が対象エリアの下部の位置を超えた時</strong>の2つの判定を行うような感じです。</p>\n<p>今回の場合だと、スクロールが対象エリアに入った場合は、<code>body</code>に対して<code>.is-in</code>というクラスを付与して、対象エリア外の時は<code>body</code>から<code>.is-in</code>クラスを削除しています。</p>\n<p><code>body</code>につけることでサイト全体への効果を与えることが可能です。汎用的に使いたいクラスなどはbodyにつけると管理しやすくなっておすすめです。</p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"YHO8U7eXLA\"><p><a href=\"https://haniwaman.com/body-data/\">ローディング判定やスクロール判定をbodyで一元管理すると捗る</a></p></blockquote>\n<p><iframe title=\"&#8220;ローディング判定やスクロール判定をbodyで一元管理すると捗る&#8221; &#8212; HPcode\" class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"https://haniwaman.com/body-data/embed/#?secret=YHO8U7eXLA\" data-secret=\"YHO8U7eXLA\" width=\"500\" height=\"282\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe></p>\n<h3><span id=\"i\">特定のエリアに入った時にアイテムを表示する例</span></h3>\n<p>もう一つよくある例として、<strong class=\"marker\">特定のエリアに入った時にアイテムを表示する例</strong>を見ていきます。</p>\n<p>特定のエリアに入った時にアイテムを表示する例です。セクション3に入ったら右側から「特定のエリアで出てくる」が伸びてくるように作っています。<br />\n<video src=\"https://haniwaman.com/wp-content/uploads/2019/12/is-in2.mov\" controls autoplay loop></video></p>\n<p>方法としては最初に紹介したものとベースは同じです。特定のエリアに入った時を監視して、<code>body</code>にクラスを付与。そして今回でいうと「特定のエリアで出てくる」というラベルに対して、処理を加えてあげるようなイメージです。</p>\n<p>表示する用のHTMLとCSSを以下のように作成して、<code>.is-in</code>クラスが付与されたら、<code>translateX(0)</code>として隠してあったアイテムを表示するようにしています。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"html\">&lt;div class=\"floating\"&gt;&lt;a href=\"#\"&gt;特定のエリアで出てくる&lt;/a&gt;&lt;/div&gt;\r\n</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"css\">.floating {\r\n\tposition: fixed;\r\n\ttransform: translateX(100%);\r\n\ttransition: all 0.3s ease 0s;\r\n\ttop: 120px;\r\n\tright: 0;\r\n}\r\n\r\n.is-in .floating {\r\n\ttransform: translateX(0);\r\n}</code></pre>\n<p>※ jQueryについては<a href=\"#jquery\">先ほどと同様</a>なので割愛します。</p>\n<h2><span id=\"i-2\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>スクロールが特定のエリアに入ったかどうかを検知するjQueryと、実際の例を2つ紹介しました。</p>\n<p>jQueryのポイントとしては、以下の3つだけです。</p>\n<ul class=\"check\">\n<li>スクロール上部の位置を取得</li>\n<li>対象エリアの上部の位置</li>\n<li>対象エリアの下部の位置</li>\n</ul>\n<p><strong>スクロール上部が対象エリアの上部の位置を超えた時</strong>と、<strong>スクロール上部が対象エリアの下部の位置を超えた時</strong>の2つの判定を行うだけの簡単な処理なので、型だけ覚えておいて使い回せるようにしておくと便利です。</p>\n","date":"December 03, 2019","categories":[{"name":"JavaScript","slug":"javascript"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"fc932bf8-68d8-5407-8389-3ef3a13ee005"}}}