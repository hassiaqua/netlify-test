{"componentChunkName":"component---src-templates-post-js","path":"/dashboard-menu/","result":{"data":{"wordpressPost":{"id":"62cb6183-a18d-59d9-ab97-f3a4ffcf2da7","title":"WordPress管理画面のメニューをお客様用の権限を作ってカスタマイズする方法","slug":"dashboard-menu","content":"<p>お客様に管理画面内での操作を確認してもらいたいときに、デフォルトの権限では物足りなくなることがあります。</p>\n<p>WordPressが用意してくれている権限は以下のとおりです。</p>\n<ul>\n<li>管理者</li>\n<li>編集者</li>\n<li>投稿者</li>\n<li>寄稿者</li>\n<li>購読者</li>\n</ul>\n<p>「なんで投稿者なのに固定ページの投稿できないんだよおぉおぉおお&#8230;」みたいな。</p>\n<p>そんな権限の悩みと、さらに詳細に管理画面のメニューをカスタマイズするための方法を紹介していきます。</p>\n<p>使用するプラグインは以下の2つ。これらが使いこなせれば、新しい権限を作ることは自由自在です！</p>\n<ul>\n<li>Admin Menu Editor</li>\n<li>User Role Editor</li>\n</ul>\n<p>今回は例として「はにわまん」という権限を作ってみます。はにわまんは、「投稿ページ」「固定ページ」しか操作できません！ということにします。</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">管理画面をお客様用にカスタマイズしてあげると親切かもしれません！</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> お客様用の新しい権限を追加する</a><ul><li><a href=\"#User_Role_Editor\"><span class=\"toc_number toc_depth_2\">1.1</span> User Role Editor のインストール</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_2\">1.2</span> 「はにわまん」の権限追加</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_2\">1.3</span> 「はにわまん」権限のカスタマイズ</a></li><li><a href=\"#i-4\"><span class=\"toc_number toc_depth_2\">1.4</span> 「はにわまん」権限でユーザー作成</a></li></ul></li><li><a href=\"#i-5\"><span class=\"toc_number toc_depth_1\">2</span> 管理画面のメニューの表示・非表示をカスタマイズ</a><ul><li><a href=\"#Admin_Menu_Editor\"><span class=\"toc_number toc_depth_2\">2.1</span> Admin Menu Editor のインストール</a></li><li><a href=\"#Admin_Menu_Editor-2\"><span class=\"toc_number toc_depth_2\">2.2</span> Admin Menu Editor の設定</a></li><li><a href=\"#i-6\"><span class=\"toc_number toc_depth_2\">2.3</span> 管理画面メニューカスタマイズ後の表示</a></li></ul></li><li><a href=\"#i-7\"><span class=\"toc_number toc_depth_1\">3</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">お客様用の新しい権限を追加する</span></h2>\n<p>WordPressが用意しているデフォルトの権限はあまりカスタマイズしないほうがいいです。本当の投稿者の権限で使いたくなったときに分けが分からなくなってしまうからですね。</p>\n<p>権限に対する操作をカスタマイズしたいときは、<strong class=\"marker\">新しく権限を追加</strong>した方が管理しやすくなります。</p>\n<p>「User Role Editor」というプラグインを使って、はにわまんの権限を追加していきます。</p>\n<h3><span id=\"User_Role_Editor\">User Role Editor のインストール</span></h3>\n<p>外観 → プラグイン → 新規追加 → キーワード「User Role Editor」 → 今すぐインストール<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu-700x270.png\" alt=\"\" width=\"700\" height=\"270\" class=\"alignnone size-medium wp-image-6152\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu-700x270.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu-768x297.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu-1200x464.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu.png 1540w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>インストールできたら「有効化」してください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu2-700x366.png\" alt=\"\" width=\"500\" class=\"alignnone size-medium wp-image-6193\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu2-700x366.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu2.png 766w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h3><span id=\"i-2\">「はにわまん」の権限追加</span></h3>\n<p>それではUser Role Editorを使って、「はにわまん」の権限を追加していきましょう。<br />\nユーザー → User Role Editor を開いて、「権限グループの追加」ボタンをクリックします。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu3-700x324.png\" alt=\"\" width=\"700\" height=\"324\" class=\"alignnone size-medium wp-image-6156\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu3-700x324.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu3-768x355.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu3-1200x555.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu3.png 1758w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>設定する内容は以下のような項目です。権限グループは英数字、権限名は覚えやすい名前（お客様に提供する場合は「〇〇株式会社」とか「〇〇様」みたいな感じにするといいかと思います）、コピー元に設定するとその権限と同じ権限で作ることができます（もちろん後でカスタマイズ可能）</p>\n<p>「はにわまん」は以下のように作ってみました。</p>\n<ul>\n<li>権限グループ名（ID） → haniwaman</li>\n<li>表示する権限名 → はにわまん</li>\n<li>コピー元 →  登録者（auther）</li>\n</ul>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu4.png\" alt=\"\" width=\"500\"  class=\"alignnone size-full wp-image-6157\" /></p>\n<h3><span id=\"i-3\">「はにわまん」権限のカスタマイズ</span></h3>\n<p>作ったばかりのはにわまん権限は以下のような設定です。（「Columns:3」にしておくと一覧時に見やすいです）<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu5-700x429.png\" alt=\"\" width=\"700\" height=\"429\" class=\"alignnone size-medium wp-image-6159\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu5-700x429.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu5-768x471.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu5-1200x736.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu5.png 1399w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h4>固定ページを編集できる権限を加える</h4>\n<p>今のままでは固定ページの編集権限がないので、上にあるPostsを参考にしつつ追加していきます。チェックしたら「更新」ボタンから更新してください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu6-700x422.png\" alt=\"\" width=\"700\" height=\"422\" class=\"alignnone size-medium wp-image-6161\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu6-700x422.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu6-768x463.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu6-1200x724.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu6.png 1431w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h4>カスタム投稿タイプの権限を見直す</h4>\n<p>カスタム投稿タイプには、それぞれの権限を指定できます。デフォルトはpostです。なので、カスタム投稿タイプの権限を設定していない人は、<strong class=\"marker\">投稿と連動してカスタム投稿タイプの権限が決まってしまいます</strong>。（投稿できる権限がある人はカスタム投稿タイプも編集できる、みたいな）<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu8-700x412.png\" alt=\"\" width=\"700\" height=\"412\" class=\"alignnone size-medium wp-image-6167\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu8-700x412.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu8-768x452.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu8.png 1049w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>カスタム投稿タイプを自作している場合は<code>register_post_type</code>内の<code>capability_type</code>から設定可能です。</p>\n<p>「Custom Post Type UI」プラグインを使っている場合は、「投稿タイプの追加と編集」 → 「設定」 → 「権限タイプ」から設定できます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu7-700x338.png\" alt=\"\" width=\"700\" height=\"338\" class=\"alignnone size-medium wp-image-6165\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu7-700x338.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu7-768x371.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu7.png 1181w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>カスタム投稿タイプを作っている方は、<code>capability_type</code>の値は任意の値に変更しましょう。そうすることで、投稿と切り分けて、カスタム投稿タイプごとに権限を設定できるようになります。</p>\n<h4>最終的な権限</h4>\n<p>固定ページを追加してカスタム投稿タイプの権限を見直すことで、最終的には以下のような権限でまとまりました。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu9-700x526.png\" alt=\"\" width=\"700\" height=\"526\" class=\"alignnone size-medium wp-image-6169\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu9-700x526.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu9-768x577.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu9-1200x902.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu9.png 1613w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>ただし、他のプラグインで追加されたカスタム投稿タイプの権限がPostsなのでまだ残ってしまっています。。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu10.png\" alt=\"\" width=\"333\" height=\"300\" class=\"alignnone size-full wp-image-6170\" /></p>\n<p>このあたり含めて細かい設定は次の「Admin Menu Editor」にて設定していきます。</p>\n<h3><span id=\"i-4\">「はにわまん」権限でユーザー作成</span></h3>\n<p>今回作成した「はにわまん」の権限でユーザーを作成していみましょう。</p>\n<p>ユーザー → 新規追加</p>\n<p>権限グループにて先程作成した権限グループ「はにわまん」を指定します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu11-700x502.png\" alt=\"\" width=\"700\" height=\"502\" class=\"alignnone size-medium wp-image-6172\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu11-700x502.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu11-768x550.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu11-1200x860.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu11.png 1259w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>ログインして管理画面のメニューを見てみます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu12.png\" alt=\"\" width=\"337\" height=\"513\" class=\"alignnone size-full wp-image-6174\" /></p>\n<ul>\n<li>コメント</li>\n<li>お問い合わせ</li>\n<li>ツール</li>\n</ul>\n<p>といった余計な項目が残ってしまっています。</p>\n<p>次の「Admin Menu Editor」にて表示されないように設定していきます。</p>\n<h2><span id=\"i-5\">管理画面のメニューの表示・非表示をカスタマイズ</span></h2>\n<p>基本的なユーザー権限は、「User Role Editor」で作成できました。次は管理画面での細かい表示・非表示の設定をしていきます。</p>\n<h3><span id=\"Admin_Menu_Editor\">Admin Menu Editor のインストール</span></h3>\n<p>外観 → プラグイン → 新規追加 → キーワード「Admin Menu Editor」 → 今すぐインストール<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu13-700x226.png\" alt=\"\" width=\"700\" height=\"226\" class=\"alignnone size-medium wp-image-6176\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu13-700x226.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu13-768x248.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu13-1200x388.png 1200w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu13.png 1738w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>インストールできたら「有効化」してください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu14-700x301.png\" alt=\"\" width=\"500\" class=\"alignnone size-medium wp-image-6178\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu14-700x301.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu14-768x330.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu14.png 867w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h3><span id=\"Admin_Menu_Editor-2\">Admin Menu Editor の設定</span></h3>\n<p>設定 → Menu Editor を開いてください。</p>\n<p>「Extra capability」に設定したユーザー権限以外は表示されないようにできるので、ここを変更していきます。</p>\n<h4>「お問い合わせ」メニュー削除</h4>\n<p>お問い合わせは管理者以外設定できないようにしたほうがいいと思います。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu15-700x589.png\" alt=\"\" width=\"700\" height=\"589\" class=\"alignnone size-medium wp-image-6181\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu15-700x589.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu15-768x646.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu15.png 1074w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<h4>「ツール」メニュー削除</h4>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu16.png\" alt=\"\" width=\"409\" height=\"415\" class=\"alignnone size-full wp-image-6182\" /></p>\n<h4>「コメント」メニュー削除</h4>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu17-700x364.png\" alt=\"\" width=\"700\" height=\"364\" class=\"alignnone size-medium wp-image-6183\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu17-700x364.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu17-768x399.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu17.png 1084w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>また、上部のメニューバーにもコメントアイコンがありますね。。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu18.png\" alt=\"\" width=\"474\" height=\"167\" class=\"alignnone size-full wp-image-6184\" /></p>\n<p>これは、<span class=\"filename\">functions.php</span>から削除します。</p>\n<pre><span class=\"filename\">functions.php</span><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"php\">function remove_bar_menus( $wp_admin_bar ) {\r\n\t$wp_admin_bar-&gt;remove_menu( 'comments' );\r\n}\r\nadd_action('admin_bar_menu', 'remove_bar_menus', 201);</code></pre>\n<h3><span id=\"i-6\">管理画面メニューカスタマイズ後の表示</span></h3>\n<p>必要なものだけでカスタマイズできました！<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/dashboard-menu19.png\" alt=\"\" width=\"251\" height=\"371\" class=\"alignnone size-full wp-image-6188\" /></p>\n<h2><span id=\"i-7\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>WordPressの管理画面のメニューをお客様用の権限を作ってカスタマイズする方法でした。</p>\n<p>管理画面をお客様に渡す際は最新の中を払わないといけません。余計な操作をされてそれまでの対応が無駄になる、、なんて悲劇は極力防ぎたいものです。</p>\n<ul>\n<li>Admin Menu Editor</li>\n<li>User Role Editor</li>\n</ul>\n<p>を使えば、オリジナルな権限と管理画面を作ることができます。管理画面を他人に提供する際には、ぜひお試しください。</p>\n","date":"May 15, 2018","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":[{"name":"WordPressプラグイン","slug":"plugin"}],"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"62cb6183-a18d-59d9-ab97-f3a4ffcf2da7"}}}