{"componentChunkName":"component---src-templates-post-js","path":"/permalink-not-reflected/","result":{"data":{"wordpressPost":{"id":"25eecf5d-33ca-5e55-b06b-235ec7beaa2e","title":"【VPS】WordPressのパーマリンクが反映されない場合に確認したい3箇所","slug":"permalink-not-reflected","content":"<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">WordPressのパーマリンクが反映されない場合に確認したいサーバーの3箇所をまとめました</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#htaccess\"><span class=\"toc_number toc_depth_1\">1</span> .htaccess</a></li><li><a href=\"#mod_rewrite\"><span class=\"toc_number toc_depth_1\">2</span> mod_rewriteモジュールが読み込まれているか</a><ul><li><a href=\"#i\"><span class=\"toc_number toc_depth_2\">2.1</span> 設定ファイルの場所</a></li></ul></li><li><a href=\"#AllowOverride_All\"><span class=\"toc_number toc_depth_1\">3</span> AllowOverride All</a></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">4</span> おわり</a></li></ul></div>\n<h2><span id=\"htaccess\">.htaccess</span></h2>\n<p>wordpressをインストールした場所の直下（wp-adminとか同じ場所）に、.htaccessファイルが存在してかつ以下のような内容が書かれているか。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"apache\"># BEGIN WordPress\r\n&lt;IfModule mod_rewrite.c&gt;\r\nRewriteEngine On\r\nRewriteBase /\r\nRewriteRule ^index\\.php$ - [L]\r\nRewriteCond %{REQUEST_FILENAME} !-f\r\nRewriteCond %{REQUEST_FILENAME} !-d\r\nRewriteRule . /index.php [L]\r\n&lt;/IfModule&gt;\r\n\r\n# END WordPress</code></pre>\n<h2><span id=\"mod_rewrite\">mod_rewriteモジュールが読み込まれているか</span></h2>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"txt\">LoadModule rewrite_module modules/mod_rewrite.so</code></pre>\n<p>apacheの設定ファイルに上記が存在することを確認します。（コメント（<code>#</code>）がついていたら削除してください。）</p>\n<h3><span id=\"i\">設定ファイルの場所</span></h3>\n<h4>CentOS 6 系</h4>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"cli nohighlight hljs\">sudo vi /etc/httpd/conf/httpd.conf\r\n</code></pre>\n<h4>CentOS 7 系</h4>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"cli nohighlight hljs\">sudo vi /etc/httpd/conf.modules.d/00-base.conf\r\n</code></pre>\n<h2><span id=\"AllowOverride_All\">AllowOverride All</span></h2>\n<p><code>AllowOverride</code>は.htaccessファイルの記述内容に対してどういった許可を与えるかの設定になります。</p>\n<p>パーマリンクの設定を変更すると.htaccessファイルに設定が書き込まれるわけですが、そもそも<code>AllowOverride</code>で許可されていないと設定は反映されません。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"cli nohighlight hljs\">sudo vi /etc/httpd/conf/httpd.conf\r\n</code></pre>\n<p>の中の.htaccessファイルが設置されるフォルダの設定場所を探します。（大抵は<code>/var/www/html</code>）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-5\">コピー</span><code id=\"code-5\" class=\"txt\">&lt;Directory \"/var/www/html\"&gt;</code></pre>\n<p>この中の<code>AllowOverride</code>を<code>All</code>にしてあげてください。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-6\">コピー</span><code id=\"code-6\" class=\"txt\">AllowOverride All</code></pre>\n<h2><span id=\"i-2\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>自分でサーバーを管理すると、色々と面倒な作業が発生しますね&#8230;。WordPressのパーマリンクが反映されない場合は、今回の3箇所を確認してみてください。</p>\n","date":"December 24, 2017","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"25eecf5d-33ca-5e55-b06b-235ec7beaa2e"}}}