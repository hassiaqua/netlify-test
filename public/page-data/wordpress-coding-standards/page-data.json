{"componentChunkName":"component---src-templates-post-js","path":"/wordpress-coding-standards/","result":{"data":{"wordpressPost":{"id":"13c7e642-46b3-583f-bc40-cb61e30044b8","title":"Windowsに「WordPress-Coding-Standards」を導入する方法","slug":"wordpress-coding-standards","content":"<p>WordPressでテーマやプラグインを開発している人なら必須な「WordPress-Coding-Standards」をWindowsに導入する方法について紹介していきます。</p>\n<p>いざ実行するとエラー出まくりで、めちゃくちゃ凹みますが、それぞれのエラーの意味を噛みしめながら修正していってください笑</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">手順が多いですが、、、順番に導入していってください</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#WordPress-Coding-Standards\"><span class=\"toc_number toc_depth_1\">1</span> 「WordPress-Coding-Standards」を導入までの流れ</a></li><li><a href=\"#Composer\"><span class=\"toc_number toc_depth_1\">2</span> Composerのインストール</a></li><li><a href=\"#PHP_CodeShiffer\"><span class=\"toc_number toc_depth_1\">3</span> PHP_CodeShifferのインストール</a></li><li><a href=\"#Git\"><span class=\"toc_number toc_depth_1\">4</span> Gitのインストール</a></li><li><a href=\"#WordPress-Coding-Standards-2\"><span class=\"toc_number toc_depth_1\">5</span> WordPress-Coding-Standardsのインストール</a></li><li><a href=\"#WordPress-Coding-Standards-3\"><span class=\"toc_number toc_depth_1\">6</span> WordPress-Coding-Standardsの使い方</a></li><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">7</span> おわり</a></li></ul></div>\n<h2><span id=\"WordPress-Coding-Standards\">「WordPress-Coding-Standards」を導入までの流れ</span></h2>\n<p>前提で導入していかないといけないものがたくさんあるので、順番に行っていきましょう。</p>\n<p>導入の流れとしては以下のとおりです。（たぶんMacとかならめちゃくちゃ簡単なんだろうなぁと思いつつ。。）</p>\n<ol>\n<li>XAMPP</li>\n<li>Composer</li>\n<li>PHP_CodeShiffer</li>\n<li>Git</li>\n<li>WordPress-Coding-Standards</li>\n</ol>\n<p>それでは順番に入れていきましょう！何も導入していない人にとっては<strong class=\"marker\">道のりが長いですが、頑張ってついてきてください。。</strong></p>\n<h2><span id=\"Composer\">Composerのインストール</span></h2>\n<p>「PHP_CodeShiffer」を導入するためには、Composerが必要になります。ComposerをWindowsに導入する方法は下記にまとめていますので、参考にして導入してみてください。</p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"J6fZGGmH6e\"><p><a href=\"https://haniwaman.com/windows-composer/\">WindowsにComposerをインストールする方法！</a></p></blockquote>\n<p><iframe title=\"&#8220;WindowsにComposerをインストールする方法！&#8221; &#8212; HPcode\" class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"https://haniwaman.com/windows-composer/embed/#?secret=J6fZGGmH6e\" data-secret=\"J6fZGGmH6e\" width=\"500\" height=\"282\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe></p>\n<p>コマンドプロンプトで下記が動作するところまで動けば、こちらに戻ってきだてください。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"cli hljs nohighlight\">composer --version\r\nComposer version 1.6.3 2018-01-31 16:28:17\r\n</code></pre>\n<h2><span id=\"PHP_CodeShiffer\">PHP_CodeShifferのインストール</span></h2>\n<p>Composerが導入できていれば、下記のコマンドで「PHP_CodeShiffer」が導入できます。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"cli hljs nohighlight\">composer global require \"squizlabs/php_codesniffer=*\"\r\n</code></pre>\n<p>少し時間がかかります。</p>\n<p>コマンドプロンプトで以下のコマンドが反応すればOKです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"cli hljs nohighlight\">phpcs -i\r\nThe installed coding standards are PEAR, Squiz, PSR2, PHPCS, PSR1, Zend and MySource\r\n</code></pre>\n<h2><span id=\"Git\">Gitのインストール</span></h2>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/03/git0-700x385.png\" alt=\"\" width=\"700\" height=\"385\" class=\"alignnone size-medium wp-image-5178\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/03/git0-700x385.png 700w, https://haniwaman.com/wp-content/uploads/2018/03/git0-768x422.png 768w, https://haniwaman.com/wp-content/uploads/2018/03/git0.png 1094w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>手順については、以下でまとめています。<br />\n→ <a href=\"https://haniwaman.com/git-for-windows/\" rel=\"noopener noreferrer\" target=\"_blank\">GitをWindowsで使うためのGit for Windowsのインストールと初期設定</a></p>\n<p>コマンドプロンプトで下記のコマンドが使えるようになればOKです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"cli hljs nohighlight\">git --version\r\ngit version 2.16.2.windows.1\r\n</code></pre>\n<h2><span id=\"WordPress-Coding-Standards-2\">WordPress-Coding-Standardsのインストール</span></h2>\n<p>WordPress-Coding-Standardsのファイル一式をダウンロードしていきます。<br />\nダウンロード先は、XAMPPの<span class=\"folder\">C:\\xampp\\php\\pear\\PHP\\CodeSniffer\\Standards</span>フォルダです。</p>\n<p>公式のソースはこちらです → <a href=\"https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards</a></p>\n<p>gitコマンドを使って、ダウンロードしていきましょう。</p>\n<p>ダウンロード先のフォルダに移動します。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"cli hljs nohighlight\">cd C:\\xampp\\php\\pear\\PHP\\CodeSniffer\\Standards\r\n</code></pre>\n<p>クローン（ダウンロード）します。標準のブランチが「develop」となっているっぽいので、「master」を指定してあげる必要があります。（参考：<a href=\"https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards/issues/1283\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards/issues/1283</a>）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-5\">コピー</span><code id=\"code-5\" class=\"cli hljs nohighlight\">git clone -b master https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards.git\r\n</code></pre>\n<p>フォルダはコピーされましたが、まだ「WordPress-Coding-Standards」を使うことはできません。PHP_CodeShifferに存在を教えてあげる必要があります。</p>\n<p>XAMPPのPHPフォルダに移動</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-6\">コピー</span><code id=\"code-6\" class=\"cli hljs nohighlight\">cd c:\\xampp\\php\r\n</code></pre>\n<p>パスの設定</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-7\">コピー</span><code id=\"code-7\" class=\"cli hljs nohighlight\">phpcs --config-set installed_paths c:\\xampp\\php\\pear\\PHP\\CodeSniffer\\Standards\\WordPress-Coding-Standards\r\n</code></pre>\n<p>インストールされたコーディングスタンダードの確認</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-8\">コピー</span><code id=\"code-8\" class=\"cli hljs nohighlight\">phpcs -i\r\nThe installed coding standards are MySource, PEAR, PSR1, PSR2, Squiz, Zend, WordPress, WordPress-Core, WordPress-Docs, WordPress-Extra and WordPress-VIP\r\n</code></pre>\n<ul>\n<li>WordPress</li>\n<li>WordPress-Core</li>\n<li>WordPress-Docs</li>\n<li>WordPress-Extra</li>\n<li>WordPress-VIP</li>\n</ul>\n<p>が追加されているのが分かります。</p>\n<h2><span id=\"WordPress-Coding-Standards-3\">WordPress-Coding-Standardsの使い方</span></h2>\n<p>簡単にですが使い方についても紹介します。</p>\n<p>調査したいphpファイルのあるフォルダに移動してください。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-9\">コピー</span><code id=\"code-9\" class=\"cli hljs nohighlight\">cd wp-content\r\n</code></pre>\n<p><code>--standard=WordPress</code>でWordPressを選択して、対象のファイルを指定します。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-10\">コピー</span><code id=\"code-10\" class=\"cli hljs nohighlight\">phpcs --standard=WordPress index.php\r\n</code></pre>\n<p>すると、、、</p>\n<p>エラーがこんなにも！<br />\n（行数にして10行くらいしか書いてないのに。。）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-11\">コピー</span><code id=\"code-11\" class=\"txt\">----------------------------------------------------------------------\r\nFOUND 6 ERRORS AND 6 WARNINGS AFFECTING 8 LINES\r\n----------------------------------------------------------------------\r\n  1 | WARNING | [ ] The \"WordPress.XSS.EscapeOutput\" sniff has been\r\n    |         |     renamed to \"WordPress.Security.EscapeOutput\".\r\n    |         |     Please update your custom ruleset.\r\n  1 | ERROR   | [x] End of line character is invalid; expected \"\\n\"\r\n    |         |     but found \"\\r\\n\"\r\n  4 | WARNING | [ ] Found precision alignment of 2 spaces.\r\n  5 | WARNING | [ ] Found precision alignment of 2 spaces.\r\n  6 | WARNING | [ ] Found precision alignment of 2 spaces.\r\n  7 | WARNING | [ ] Found precision alignment of 2 spaces.\r\n  7 | ERROR   | [ ] Stylesheets must be registered/enqueued via\r\n    |         |     wp_enqueue_style\r\n  7 | ERROR   | [ ] Missing file doc comment\r\n  7 | ERROR   | [ ] All output should be run through an escaping\r\n    |         |     function (see the Security sections in the\r\n    |         |     WordPress Developer Handbooks), found\r\n    |         |     'get_template_directory_uri'.\r\n  8 | WARNING | [ ] Found precision alignment of 2 spaces.\r\n 18 | ERROR   | [x] Newline required after opening brace\r\n 34 | ERROR   | [x] File must end with a newline character\r\n----------------------------------------------------------------------\r\nPHPCBF CAN FIX THE 3 MARKED SNIFF VIOLATIONS AUTOMATICALLY\r\n----------------------------------------------------------------------</code></pre>\n<p>これがまだ1ファイル目って考えるとゾッとしますね。</p>\n<p>ただ、ここで吐き出されたエラーの意味を理解してWordPressのコーディング規則に沿ったコーディングをしていきましょう。</p>\n<h2><span id=\"i\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>Windowsに「WordPress-Coding-Standards」を導入する方法でした。</p>\n<p>Windowsだと、環境整備が結構たいへんだったりしますね。たぶんMacだったらコマンドをターンッってしていけばカッコよく導入していけるんだと思います。</p>\n","date":"March 29, 2018","categories":[{"name":"環境","slug":"setting"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"13c7e642-46b3-583f-bc40-cb61e30044b8"}}}