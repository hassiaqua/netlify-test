{"componentChunkName":"component---src-templates-post-js","path":"/map-area/","result":{"data":{"wordpressPost":{"id":"f8faf9ba-1abe-5ead-8a9a-d1cadd0fe872","title":"画像上の任意の場所をクリックできる「クリッカブルマップ」の使い方","slug":"map-area","content":"<p>Webサイト上に配置した画像内の任意の場所をクリックできるようにするコーディング方法の紹介です。</p>\n<p>「クリッカブルマップ」あるいは「イメージマップ」と呼ばれたりしていて、特別な実装方法ではなくHTMLがあらかじめ用意されている仕組みで対応できたりします。使うタグとしては<code>map</code>と<code>area</code>ですね。</p>\n<p>この記事では「クリッカブルマップ」の実装方法と、レスポンシブに対応する方法について紹介していけたらと思います！</p>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> クリッカブルマップの基本コード</a><ul><li><a href=\"#imgmaparea\"><span class=\"toc_number toc_depth_2\">1.1</span> imgとmapとareaを用意</a></li><li><a href=\"#Image_Map_Generator\"><span class=\"toc_number toc_depth_2\">1.2</span> 「Image Map Generator」でクリック対象を作成</a></li></ul></li><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_1\">2</span> 「クリッカブルマップ」をレスポンシブに対応させる</a><ul><li><a href=\"#jQuery_RWD_Image_Maps\"><span class=\"toc_number toc_depth_2\">2.1</span> 「jQuery RWD Image Maps」でレスポンシブ対応</a></li></ul></li><li><a href=\"#jQuery\"><span class=\"toc_number toc_depth_1\">3</span> クリックした時の挙動をjQueryで制御できる</a></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">4</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">クリッカブルマップの基本コード</span></h2>\n<p>今回はこの画像の「1」と「5」の場所をクリックできるようにしていきます。<br />\n（全部の番号も可能ですが、コード量が増えるだけなので&#8230;）</p>\n<p>まだ何もコードを入れてないので、マウスでクリックしても何も反応しないことを確認しておいてください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" alt=\"\"></p>\n<h3><span id=\"imgmaparea\"><code>img</code>と<code>map</code>と<code>area</code>を用意</span></h3>\n<p>クリッカブルマップの基本コードが以下の書き方になります（※ 型なので、このコードを貼り付けても動きはしません）</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"html\">&lt;img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" alt=\"\" usemap=\"#image-map\"&gt;\r\n&lt;map name=\"image-map\"&gt;\r\n\t&lt;area alt=\"\" title=\"\" href=\"\" target=\"\" coords=\"\" shape=\"\"&gt;\r\n\t&lt;area alt=\"\" title=\"\" href=\"\" target=\"\" coords=\"\" shape=\"\"&gt;\r\n&lt;/map&gt;</code></pre>\n<p>対象となる画像に<code>usemap</code>という属性を追加してあげます。ここの値に対応するのは<code>map</code>タグ内にある<code>name</code>の部分です。</p>\n<p><code>coords</code>の値は画像内での場所を表します。目視で作成することはたぶん不可能なので、次に紹介するようなツールを使って作成していきます。</p>\n<h3><span id=\"Image_Map_Generator\">「Image Map Generator」でクリック対象を作成</span></h3>\n<p>画像内のクリック対象のエリアは下記のようなツールを使えば簡単に作ることができます。<br />\n→ <a href=\"https://www.image-map.net/\" rel=\"noopener noreferrer\" target=\"_blank\">Free Online Image Map Generator</a></p>\n<p>自分のPC上の画像を使う場合は「Select Image from My PC」を選択して画像を選びます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area2-700x184.png\" alt=\"\" class=\"alignnone size-medium wp-image-14602\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area2-700x184.png 700w, https://haniwaman.com/wp-content/uploads/2019/05/map-area2-768x202.png 768w, https://haniwaman.com/wp-content/uploads/2019/05/map-area2-1200x316.png 1200w, https://haniwaman.com/wp-content/uploads/2019/05/map-area2.png 1780w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>対象エリアはマウスでのクリックとドラッグで直感的に選べるようになっています。以下の動画は、Shapeが「Rect」の時の操作例です。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area.gif\" alt=\"\" class=\"alignnone size-medium wp-image-14601\" /></p>\n<p>「1」と「5」を選択した状態だと以下のような感じになります（リンク先などは案件に応じて入力してあげてください）<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area3-700x408.png\" alt=\"\" class=\"alignnone size-medium wp-image-14603\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area3-700x408.png 700w, https://haniwaman.com/wp-content/uploads/2019/05/map-area3-768x447.png 768w, https://haniwaman.com/wp-content/uploads/2019/05/map-area3-1200x699.png 1200w, https://haniwaman.com/wp-content/uploads/2019/05/map-area3.png 1762w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>対象エリアの指定が一通り終わったら、「Show Me The Code!」からコードを取得します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area4-700x457.png\" alt=\"\" class=\"alignnone size-medium wp-image-14604\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area4-700x457.png 700w, https://haniwaman.com/wp-content/uploads/2019/05/map-area4-768x501.png 768w, https://haniwaman.com/wp-content/uploads/2019/05/map-area4-1200x783.png 1200w, https://haniwaman.com/wp-content/uploads/2019/05/map-area4.png 1254w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>出来上がるのが以下のようなコードで、画像のURLだけサイトから読み込めるパスに変更してあげればOKです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-1\">コピー</span><code id=\"code-1\" class=\"html\">&lt;img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" usemap=\"#image-map\"&gt;\r\n&lt;map name=\"image-map\"&gt;\r\n    &lt;area target=\"_blank\" alt=\"1\" title=\"1\" href=\"https://haniwaman.com/\" coords=\"164,74,198,106\" shape=\"rect\"&gt;\r\n    &lt;area target=\"_blank\" alt=\"5\" title=\"5\" href=\"https://haniwaman.com/\" coords=\"168,152,201,184\" shape=\"rect\"&gt;\r\n&lt;/map&gt;</code></pre>\n<div class=\"demo\">DEMO（デモ）</div>\n<p>上のコードによって出来上がった画像が以下になります。「1」と「5」がクリックできるようになって当ブログ「HPcode」のトップページに遷移するようになっているはずです。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" usemap=\"#image-map\"></p>\n<map name=\"image-map\">\n<area target=\"_blank\" alt=\"1\" title=\"1\" href=\"https://haniwaman.com/\" coords=\"164,74,198,106\" shape=\"rect\">\n<area target=\"_blank\" alt=\"5\" title=\"5\" href=\"https://haniwaman.com/\" coords=\"168,152,201,184\" shape=\"rect\">\n</map>\n<p>（おまけ）「Image Map Generator」で指定できる各項目は以下のとおりです。</p>\n<table class=\"table\">\n<tr>\n<th width=\"80\">項目</th>\n<th>説明</th>\n</tr>\n<tr>\n<th>Active</th>\n<td>チェック付いている行が操作対象となる</td>\n</tr>\n<tr>\n<th>Shape</th>\n<td>クリック対象の切り取り方（<code>shape</code>の値）</p>\n<ul>\n<li>Rect・・・四角形</li>\n<li>Poly・・・多角形</li>\n<li>Circle・・・円</li>\n</ul>\n</td>\n</tr>\n<tr>\n<th>Link</th>\n<td>対象をクリックしたときの遷移先（<code>href</code>の値）</td>\n</tr>\n<tr>\n<th>Title</th>\n<td>対象エリアのタイトル（<code>title</code>の値）</td>\n</tr>\n<tr>\n<th>Target</th>\n<td>リンク先への遷移方法（<code>target</code>の値）</td>\n</tr>\n</table>\n<h2><span id=\"i-2\">「クリッカブルマップ」をレスポンシブに対応させる</span></h2>\n<p>「クリッカブルマップ」はめちゃくちゃ便利なのですが１つ問題があって、それは画像のサイズが変わるとクリック対象の位置がズレるということです&#8230;。</p>\n<p>このレスポンシブで画像サイズが変わりまくる時代にこのままだと使えないので、「クリッカブルマップ」をレスポンシブ対応してくれれるjQueryライブラリーとセット使うことが多いです。</p>\n<h3><span id=\"jQuery_RWD_Image_Maps\">「jQuery RWD Image Maps」でレスポンシブ対応</span></h3>\n<p>以下からダウンロードすることができます。<br />\n→ <a href=\"https://github.com/stowball/jQuery-rwdImageMaps\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/stowball/jQuery-rwdImageMaps</a><br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area5-700x341.png\" alt=\"\" class=\"alignnone size-medium wp-image-14608\" srcset=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area5-700x341.png 700w, https://haniwaman.com/wp-content/uploads/2019/05/map-area5-768x374.png 768w, https://haniwaman.com/wp-content/uploads/2019/05/map-area5-1200x585.png 1200w, https://haniwaman.com/wp-content/uploads/2019/05/map-area5.png 1508w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>jQueryに依存するので、jQueryを読み込んだ後に<span class=\"filename\">jquery.rwdImageMaps.js</span>を読み込んであげてください。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-2\">コピー</span><code id=\"code-2\" class=\"html\">&lt;script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"js/jquery.rwdImageMaps.js\"&gt;&lt;/script&gt;</code></pre>\n<p>JavaScriptとしては1行を追記するだけOKです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-3\">コピー</span><code id=\"code-3\" class=\"js\">jQuery( 'img[usemap]' ).rwdImageMaps();\r\n</code></pre>\n<p>これで画像サイズが縮小・拡大されてもクリック対象のエリアは同じ位置を保ってくれるようになります。</p>\n<h2><span id=\"jQuery\">クリックした時の挙動をjQueryで制御できる</span></h2>\n<p>「クリッカブルマップ」のエリアは、<code>a</code>タグのようにjQueryのクリックイベントを拾うことが可能です。</p>\n<p>つまり、画面遷移させずにクリックした時にポップを表示させるみたいな挙動もできるわけですね。</p>\n<p>具体的には、<code>area</code>に特定のクラスやidをつけてjQueryから制御できるようにすればOKです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-4\">コピー</span><code id=\"code-4\" class=\"html\">&lt;img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" usemap=\"#image-map2\"&gt;\r\n&lt;map name=\"image-map2\"&gt;\r\n    &lt;area class=\"image-num\" alt=\"1\" title=\"1\" href=\"#\" coords=\"164,74,198,106\" shape=\"rect\"&gt;\r\n    &lt;area class=\"image-num\" alt=\"5\" title=\"5\" href=\"#\" coords=\"168,152,201,184\" shape=\"rect\"&gt;\r\n&lt;/map&gt;</code></pre>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-5\">コピー</span><code id=\"code-5\" class=\"js\">jQuery( '.image-num' ).on( 'click', function() {\r\n\talert( jQuery( this ).attr( 'title' ) );\r\n\treturn false;\r\n});</code></pre>\n<div class=\"demo\">DEMO（デモ）</div>\n<p>クリックすると<code>title</code>に指定された値がブラウザ標準のアラート機能で表示されます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2019/05/map-area1.png\" usemap=\"#image-map2\"></p>\n<map name=\"image-map2\">\n<area class=\"image-num\" alt=\"1\" title=\"1\" href=\"#\" coords=\"164,74,198,106\" shape=\"rect\">\n<area class=\"image-num\" alt=\"5\" title=\"5\" href=\"#\" coords=\"168,152,201,184\" shape=\"rect\">\n</map>\n<p>こんな風にjQueryで制御できるので、案件に応じて柔軟に対応することができます。<code>return false;</code>は<code>href</code>の動きを無効化するための記述なので、ここは忘れないように！</p>\n<h2><span id=\"i-3\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>「クリッカブルマップ」の実装方法と、レスポンシブに対応する方法について紹介しました。</p>\n<p>画像上で特定のエリアだけをクリック対象にしたい場合に使える便利なHTMLタグなので使えるようになっておくと重宝するはずです！</p>\n<p>実用的なところで言うと地図などでよく見る気がします。</p>\n","date":"May 13, 2019","categories":[{"name":"HTML","slug":"html"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f8faf9ba-1abe-5ead-8a9a-d1cadd0fe872"}}}