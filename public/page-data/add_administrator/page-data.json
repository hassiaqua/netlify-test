{"componentChunkName":"component---src-templates-post-js","path":"/add_administrator/","result":{"data":{"wordpressPost":{"id":"278a3738-4490-51ec-82d6-1ac681d6b6e1","title":"WordPressの管理者を削除してしまった&#8230;！データベースから管理者を追加する最小構成","slug":"add_administrator","content":"<ul>\n<li>管理者を削除してしまった</li>\n<li>管理者のパスワードが分からなくなった</li>\n</ul>\n<p>など、WordPressの管理画面に入れなくなった時の対処方法として、</p>\n<p><span class=\"font-l\"><strong class=\"marker\">データベースから新しく管理者を追加する方法</strong></span>を紹介します！</p>\n<div class=\"chat\"><figure class=\"chat-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"><figcaption>はにわまん</figcaption></figure><div class=\"chat-content\">覚えておくと「もしも」の時に安心です...</div></div>\n<div id=\"toc_container\" class=\"no_bullets\"><p class=\"toc_title\">目次</p><ul class=\"toc_list\"><li><a href=\"#i\"><span class=\"toc_number toc_depth_1\">1</span> データベースのアカウント確認</a></li><li><a href=\"#phpMyAdmin\"><span class=\"toc_number toc_depth_1\">2</span> phpMyAdminににアクセス</a></li><li><a href=\"#wp_userwp_usermeta\"><span class=\"toc_number toc_depth_1\">3</span> 「wp_user」と「wp_usermeta」に追加</a><ul><li><a href=\"#wp_user\"><span class=\"toc_number toc_depth_2\">3.1</span> 「wp_user」に追加</a></li><li><a href=\"#wp_usermeta\"><span class=\"toc_number toc_depth_2\">3.2</span> 「wp_usermeta」に追加</a></li></ul></li><li><a href=\"#WordPress\"><span class=\"toc_number toc_depth_1\">4</span> WordPress管理画面にログインしてみる</a><ul><li><a href=\"#i-2\"><span class=\"toc_number toc_depth_2\">4.1</span> 「ニックネーム」の設定方法</a></li></ul></li><li><a href=\"#i-3\"><span class=\"toc_number toc_depth_1\">5</span> おわり</a></li></ul></div>\n<h2><span id=\"i\">データベースのアカウント確認</span></h2>\n<p>まずは、データベースにアクセスするアカウントを確認します。</p>\n<p>WordPressをインストールしたフォルダ直下にある<span class=\"filename\">wp-config.php</span>の以下の箇所に書かれているので、開いておいてください。<br />\n※ 「********」の中に各環境に応じて値が入っているはずです。</p>\n<pre><span class=\"code-copy\" data-clipboard-target=\"#code-0\">コピー</span><code id=\"code-0\" class=\"php\">/** MySQL データベースのユーザー名 */\r\ndefine('DB_USER', '********');\r\n/** MySQL データベースのパスワード */\r\ndefine('DB_PASSWORD', '********');</code></pre>\n<p>ここの値を次のphpMyAdminにログインする際に使用します。</p>\n<h2><span id=\"phpMyAdmin\">phpMyAdminににアクセス</span></h2>\n<p>phpMyAdminにアクセスしてデータベースを操作します。メジャーなレンタルサーバーであれば管理画面からアクセスできるようになっているはずです。</p>\n<p>わたしはXserverなのでこちらを例にすると、<br />\n<a href=\"https://www.xserver.ne.jp/login_server.php\" rel=\"noopener\" target=\"_blank\">サーバーパネル</a>にログインして「phpmyadmin」をクリックすることでアクセスできます。</p>\n<p><img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator-700x340.png\" alt=\"\" width=\"700\" height=\"340\" class=\"alignnone size-medium wp-image-6251\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator-700x340.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator.png 767w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>Xserverではベーシック認証でユーザーIDとパスワードを確認されます（一般的にはログイン画面がでます）<br />\nここに先程の<span class=\"filename\">wp-config.php</span>の内容を入れます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator2.png\" alt=\"\" width=\"444\" height=\"213\" class=\"alignnone size-full wp-image-6252\" /></p>\n<h2><span id=\"wp_userwp_usermeta\">「wp_user」と「wp_usermeta」に追加</span></h2>\n<p>WordPressでユーザーを管理しているテーブルは以下の2つです。</p>\n<ul>\n<li>wp_user</li>\n<li>wp_usermeta</li>\n</ul>\n<p>「wp_user」と「wp_usermeta」に管理者権限のアカウントを追加していきましょう。</p>\n<h3><span id=\"wp_user\">「wp_user」に追加</span></h3>\n<p>wp_userのテーブルを開いて「挿入」タブをクリックします。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator3-700x542.png\" alt=\"\" width=\"700\" height=\"542\" class=\"alignnone size-medium wp-image-6253\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator3-700x542.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator3-768x594.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator3.png 925w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>必要な項目を入力したら右下の「実行」ボタンから登録します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator4-700x316.png\" alt=\"\" width=\"700\" height=\"316\" class=\"alignnone size-medium wp-image-6254\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator4-700x316.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator4-768x347.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator4.png 1031w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>入力項目は以下のような感じです。</p>\n<table class=\"table\">\n<tr>\n<th width=\"158\">ID</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_login</th>\n<td>ユーザーID</td>\n</tr>\n<tr>\n<th>user_pas</th>\n<td>パスワード（※ <strong class=\"marker\">関数で「MD5」を選択すること！</strong>）</td>\n</tr>\n<tr>\n<th>user_nicename</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_email</th>\n<td>連絡可能なメールアドレス</td>\n</tr>\n<tr>\n<th>user_url</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_registered</th>\n<td>関数で「NOW」を選択</td>\n</tr>\n<tr>\n<th>user_activation_key</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_status</th>\n<td>0</td>\n</tr>\n<tr>\n<th>display_name</th>\n<td>空欄</td>\n</tr>\n</table>\n<p>「表示」タブを見てもらうと、新しくユーザーが追加されていることが分かります。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator5-700x242.png\" alt=\"\" width=\"700\" height=\"242\" class=\"alignnone size-medium wp-image-6258\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator5-700x242.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator5-768x265.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator5.png 936w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p><strong class=\"marker\">ユーザーID（ID列）の値を覚えておいてください</strong>（この例では「3」の値が入っているところ）<br />\n次の「wp_usermeta」で使います。</p>\n<h3><span id=\"wp_usermeta\">「wp_usermeta」に追加</span></h3>\n<p>「wp_user」に登録しただけではまだログインできません。<br />\n登録したユーザーIDを使って「wp_usermeta」に権限に関する2つの項目（wp_user_levelとwp_capabilities）を追加していきます。</p>\n<p>wp_usermetaテーブルを開いて「挿入」タブを開きます。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator6-700x517.png\" alt=\"\" width=\"700\" height=\"517\" class=\"alignnone size-medium wp-image-6260\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator6-700x517.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator6-768x567.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator6.png 1000w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<div>まずは「wp_user_level」を登録します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator12-700x405.png\" alt=\"\" width=\"700\" height=\"405\" class=\"alignnone size-medium wp-image-6268\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator12-700x405.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator12.png 748w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></div>\n<table class=\"table\">\n<tr>\n<th width=\"158\">umeta_id</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_id</th>\n<td>wp_userで登録した「ID」</td>\n</tr>\n<tr>\n<th>meta_key</th>\n<td>wp_user_level</td>\n</tr>\n<tr>\n<th>meta_value</th>\n<td>10</td>\n</tr>\n</table>\n<div>もう1つ「wp_capabilities」を登録します。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator13-700x402.png\" alt=\"\" width=\"700\" height=\"402\" class=\"alignnone size-medium wp-image-6269\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator13-700x402.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator13.png 744w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></div>\n<table class=\"table\">\n<tr>\n<th width=\"158\">umeta_id</th>\n<td>空欄</td>\n</tr>\n<tr>\n<th>user_id</th>\n<td>wp_userで登録した「ID」</td>\n</tr>\n<tr>\n<th>meta_key</th>\n<td>wp_capabilities</td>\n</tr>\n<tr>\n<th>meta_value</th>\n<td><code>a:1:{s:13:\"administrator\";b:1;}</code></td>\n</tr>\n</table>\n<p>※ 「管理者」と登録するための値です。</p>\n<p>ここまで登録すれば、WordPress管理画面にログインできます。</p>\n<h2><span id=\"WordPress\">WordPress管理画面にログインしてみる</span></h2>\n<p>wp_userで登録した「user_login」と「user_pass」でログインしてみましょう。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator7.png\" alt=\"\" width=\"386\" height=\"477\" class=\"alignnone size-full wp-image-6261\" /></p>\n<p>無事ログインできましたー！・・・が、名前がありません。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator8.png\" alt=\"\" width=\"152\" height=\"69\" class=\"alignnone size-full wp-image-6262\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator8.png 152w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator8-150x69.png 150w\" sizes=\"(max-width: 152px) 100vw, 152px\" /></p>\n<p>ここは「ニックネーム」に登録されるものになります。</p>\n<h3><span id=\"i-2\">「ニックネーム」の設定方法</span></h3>\n<p>ユーザー　→ あなたのプロフィール から「ニックネーム (必須)」を入力してあげてください。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator9-700x319.png\" alt=\"\" width=\"700\" height=\"319\" class=\"alignnone size-medium wp-image-6264\" srcset=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator9-700x319.png 700w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator9-768x350.png 768w, https://haniwaman.com/wp-content/uploads/2018/05/add_administrator9.png 769w\" sizes=\"(max-width: 700px) 100vw, 700px\" /></p>\n<p>ニックネームを入力して更新すれば、「ブログ上での表示名」を選択できるようになります。ここからブログで表示させる名前を選択することが可能です。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator10.png\" alt=\"\" width=\"455\" height=\"114\" class=\"alignnone size-full wp-image-6265\" /></p>\n<p>「こんにちは、〇〇さん」の部分が「ブログ上での表示名」で表示されたことが分かると思います。<br />\n<img src=\"https://haniwaman.com/wp-content/uploads/2018/05/add_administrator11.png\" alt=\"\" width=\"213\" height=\"30\" class=\"alignnone size-full wp-image-6266\" /></p>\n<h2><span id=\"i-3\">おわり</span></h2><div class=\"matome\"><div class=\"matome-img\"><img src=\"https://haniwaman.com/wp-content/themes/hpcode/img/haniwa.png\" alt=\"\"></div><div class=\"matome-twitter\"><a href=\"https://twitter.com/haniwa008?ref_src=twsrc%5Etfw\" class=\"twitter-follow-button\" data-show-screen-name=\"false\" data-size=\"large\" data-lang=\"ja\" data-show-count=\"true\">Follow @haniwa008</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></div></div><!-- /matome -->\n<p>データベースから管理者を追加する方法でした。</p>\n<p>WordPressは管理画面に入れないことには何もできないですからね。。</p>\n<p>この記事が「管理画面にログインできなくなった・・・」という方の少しでもお役に立てたら幸いです。</p>\n","date":"May 20, 2018","categories":[{"name":"WordPress","slug":"wordpress"}],"tags":null,"author":{"name":"はにわまん","slug":"haniwaman"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"278a3738-4490-51ec-82d6-1ac681d6b6e1"}}}